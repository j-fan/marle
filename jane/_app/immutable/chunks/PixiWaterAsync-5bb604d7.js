import{T as he,S as $,i as K,s as N,e as O,b as S,g as B,t as k,d as G,f as h,h as d,Y as se,E as ie,k as w,l as E,m as I,n as v,p as T,L as ae,F as re,G as oe,H as ce,I as y,o as me,U as Z,Z as fe,A as b,V as J,q as W,a as A,r as M,c as H,u as ue,M as pe,D as ke,v as Y,w as _e,x as q,y as L,_ as ge,$ as be}from"./index-a2ffde42.js";import{c as ve,b as ye}from"./index-104a2518.js";import{_ as we}from"./preload-helper-b21cceae.js";function Ee(a,{delay:e=0,duration:n=400,easing:t=he}={}){const s=+getComputedStyle(a).opacity;return{delay:e,duration:n,easing:t,css:i=>`opacity: ${i*s}`}}function R(a,{delay:e=0,duration:n=400,easing:t=ve,x:s=0,y:i=0,opacity:l=0}={}){const r=getComputedStyle(a),o=+r.opacity,c=r.transform==="none"?"":r.transform,m=o*(1-l);return{delay:e,duration:n,easing:t,css:(D,P)=>`
			transform: ${c} translate(${(1-D)*s}px, ${(1-D)*i}px);
			opacity: ${o-m*P}`}}function Ie(a){let e,n,t,s;const i=a[4].default,l=ie(i,a,a[3],null);return{c(){e=w("button"),l&&l.c(),this.h()},l(r){e=E(r,"BUTTON",{type:!0,style:!0,class:!0});var o=I(e);l&&l.l(o),o.forEach(d),this.h()},h(){v(e,"type","button"),T(e,"width",a[1]),v(e,"class","svelte-1rsnc9j")},m(r,o){S(r,e,o),l&&l.m(e,null),n=!0,t||(s=ae(e,"click",a[5]),t=!0)},p(r,o){l&&l.p&&(!n||o&8)&&re(l,i,r,r[3],n?ce(i,r[3],o,null):oe(r[3]),null)},i(r){n||(h(l,r),n=!0)},o(r){k(l,r),n=!1},d(r){r&&d(e),l&&l.d(r),t=!1,s()}}}function Se(a){let e,n,t;const s=a[4].default,i=ie(s,a,a[3],null);return{c(){e=w("a"),n=w("button"),i&&i.c(),this.h()},l(l){e=E(l,"A",{href:!0,style:!0,class:!0});var r=I(e);n=E(r,"BUTTON",{type:!0,style:!0,class:!0});var o=I(n);i&&i.l(o),o.forEach(d),r.forEach(d),this.h()},h(){v(n,"type","button"),T(n,"width",a[1]),v(n,"class","svelte-1rsnc9j"),v(e,"href",a[0]),T(e,"width",a[1]),v(e,"class","svelte-1rsnc9j")},m(l,r){S(l,e,r),y(e,n),i&&i.m(n,null),t=!0},p(l,r){i&&i.p&&(!t||r&8)&&re(i,s,l,l[3],t?ce(s,l[3],r,null):oe(l[3]),null),(!t||r&1)&&v(e,"href",l[0])},i(l){t||(h(i,l),t=!0)},o(l){k(i,l),t=!1},d(l){l&&d(e),i&&i.d(l)}}}function De(a){let e,n,t,s;const i=[Se,Ie],l=[];function r(o,c){return o[0]?0:1}return e=r(a),n=l[e]=i[e](a),{c(){n.c(),t=O()},l(o){n.l(o),t=O()},m(o,c){l[e].m(o,c),S(o,t,c),s=!0},p(o,[c]){let m=e;e=r(o),e===m?l[e].p(o,c):(B(),k(l[m],1,1,()=>{l[m]=null}),G(),n=l[e],n?n.p(o,c):(n=l[e]=i[e](o),n.c()),h(n,1),n.m(t.parentNode,t))},i(o){s||(h(n),s=!0)},o(o){k(n),s=!1},d(o){l[e].d(o),o&&d(t)}}}function Pe(a,e,n){let{$$slots:t={},$$scope:s}=e,{isFullWidth:i=!1}=e,{href:l=void 0}=e;const r=i?"100%":"auto";function o(c){se.call(this,a,c)}return a.$$set=c=>{"isFullWidth"in c&&n(2,i=c.isFullWidth),"href"in c&&n(0,l=c.href),"$$scope"in c&&n(3,s=c.$$scope)},[l,r,i,s,t,o]}class Ce extends ${constructor(e){super(),K(this,e,Pe,De,N,{isFullWidth:2,href:0})}}const Q=(a,e)=>{const n=a[e];return n===void 0?(console.error(`Dialog key ${String(e)} is unknown in dialogData`),{text:`Something went wrong with the dialog logic: "${String(e)}" key is unknown`,options:[]}):n};function X(a,e,n){const t=a.slice();return t[6]=e[n],t}function x(a){let e,n,t,s,i,l=a[1]&&ee(a);return{c(){e=w("div"),l&&l.c(),this.h()},l(r){e=E(r,"DIV",{class:!0,style:!0});var o=I(e);l&&l.l(o),o.forEach(d),this.h()},h(){v(e,"class","marle-icon svelte-1k1r9r8"),T(e,"background-image","url('https://raw.githubusercontent.com/j-fan/marle-images/main/jane/img/marle_green.jpg')")},m(r,o){S(r,e,o),l&&l.m(e,null),t=!0,s||(i=ae(e,"introend",a[3]),s=!0)},p(r,o){a=r,a[1]?l?(l.p(a,o),o&2&&h(l,1)):(l=ee(a),l.c(),h(l,1),l.m(e,null)):l&&(B(),k(l,1,1,()=>{l=null}),G())},i(r){t||(h(l),n||Z(()=>{n=fe(e,R,{y:40,duration:1e3,easing:ye}),n.start()}),t=!0)},o(r){k(l),t=!1},d(r){r&&d(e),l&&l.d(),s=!1,i()}}}function ee(a){let e,n=a[2],t,s,i=ne(a);return{c(){e=w("div"),i.c(),this.h()},l(l){e=E(l,"DIV",{class:!0});var r=I(e);i.l(r),r.forEach(d),this.h()},h(){v(e,"class","chat-wrapper svelte-1k1r9r8")},m(l,r){S(l,e,r),i.m(e,null),s=!0},p(l,r){r&4&&N(n,n=l[2])?(B(),k(i,1,1,b),G(),i=ne(l),i.c(),h(i,1),i.m(e,null)):i.p(l,r)},i(l){s||(h(i),Z(()=>{t||(t=J(e,R,{y:20,duration:300,delay:500},!0)),t.run(1)}),s=!0)},o(l){k(i),t||(t=J(e,R,{y:20,duration:300,delay:500},!1)),t.run(0),s=!1},d(l){l&&d(e),i.d(l),l&&t&&t.end()}}}function te(a){let e,n;return{c(){e=w("h4"),n=W("YOU"),this.h()},l(t){e=E(t,"H4",{class:!0});var s=I(e);n=M(s,"YOU"),s.forEach(d),this.h()},h(){v(e,"class","svelte-1k1r9r8")},m(t,s){S(t,e,s),y(e,n)},d(t){t&&d(e)}}}function Oe(a){let e=a[6].text+"",n;return{c(){n=W(e)},l(t){n=M(t,e)},m(t,s){S(t,n,s)},p(t,s){s&4&&e!==(e=t[6].text+"")&&ue(n,e)},d(t){t&&d(n)}}}function le(a){let e,n;return e=new Ce({props:{isFullWidth:!0,$$slots:{default:[Oe]},$$scope:{ctx:a}}}),e.$on("click",function(){ke(a[4](a[6]))&&a[4](a[6]).apply(this,arguments)}),{c(){Y(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,s){q(e,t,s),n=!0},p(t,s){a=t;const i={};s&516&&(i.$$scope={dirty:s,ctx:a}),e.$set(i)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function ne(a){let e,n,t,s,i,l,r=a[2].text+"",o,c,m,D,P,C,g=a[2].options.length>0&&te(),V=a[2].options,_=[];for(let f=0;f<V.length;f+=1)_[f]=le(X(a,V,f));const de=f=>k(_[f],1,1,()=>{_[f]=null});return{c(){e=w("div"),n=w("div"),t=w("h4"),s=W("Marle"),i=A(),l=w("p"),o=W(r),c=A(),m=w("div"),g&&g.c(),D=A();for(let f=0;f<_.length;f+=1)_[f].c();this.h()},l(f){e=E(f,"DIV",{class:!0});var p=I(e);n=E(p,"DIV",{class:!0});var u=I(n);t=E(u,"H4",{class:!0});var j=I(t);s=M(j,"Marle"),j.forEach(d),i=H(u),l=E(u,"P",{});var z=I(l);o=M(z,r),z.forEach(d),u.forEach(d),c=H(p),m=E(p,"DIV",{class:!0});var F=I(m);g&&g.l(F),D=H(F);for(let U=0;U<_.length;U+=1)_[U].l(F);F.forEach(d),p.forEach(d),this.h()},h(){v(t,"class","svelte-1k1r9r8"),v(n,"class","dialog-item left svelte-1k1r9r8"),v(m,"class","dialog-item right svelte-1k1r9r8"),v(e,"class","chat-content svelte-1k1r9r8")},m(f,p){S(f,e,p),y(e,n),y(n,t),y(t,s),y(n,i),y(n,l),y(l,o),y(e,c),y(e,m),g&&g.m(m,null),y(m,D);for(let u=0;u<_.length;u+=1)_[u].m(m,null);C=!0},p(f,p){if((!C||p&4)&&r!==(r=f[2].text+"")&&ue(o,r),f[2].options.length>0?g||(g=te(),g.c(),g.m(m,D)):g&&(g.d(1),g=null),p&20){V=f[2].options;let u;for(u=0;u<V.length;u+=1){const j=X(f,V,u);_[u]?(_[u].p(j,p),h(_[u],1)):(_[u]=le(j),_[u].c(),h(_[u],1),_[u].m(m,null))}for(B(),u=V.length;u<_.length;u+=1)de(u);G()}},i(f){if(!C){for(let p=0;p<V.length;p+=1)h(_[p]);P||Z(()=>{P=fe(e,Ee,{duration:400}),P.start()}),C=!0}},o(f){_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)k(_[p]);C=!1},d(f){f&&d(e),g&&g.d(),pe(_,f)}}}function Ve(a){let e,n,t=a[0]&&x(a);return{c(){t&&t.c(),e=O()},l(s){t&&t.l(s),e=O()},m(s,i){t&&t.m(s,i),S(s,e,i),n=!0},p(s,[i]){s[0]?t?(t.p(s,i),i&1&&h(t,1)):(t=x(s),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(B(),k(t,1,1,()=>{t=null}),G())},i(s){n||(h(t),n=!0)},o(s){k(t),n=!1},d(s){t&&t.d(s),s&&d(e)}}}function Be(a,e,n){let{dialogData:t}=e,s=!1,i=!1,l=t.start;me(()=>{n(0,s=!0)});const r=()=>{n(1,i=!i)},o=c=>async m=>{var P,C;m.stopPropagation(),n(2,l=Q(t,c.nextKey));const D=await((P=l.onMount)==null?void 0:P.call(l));D&&n(2,l=Q(t,D)),(C=c.onClick)==null||C.call(c)};return a.$$set=c=>{"dialogData"in c&&n(5,t=c.dialogData)},[s,i,l,r,o,t]}class Ae extends ${constructor(e){super(),K(this,e,Be,Ve,N,{dialogData:5})}}function Ge(a){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function je(a){let e,n,t;var s=a[5].default;function i(l){return{props:{imageSrc:l[0],displacePower:l[1],canvasId:l[2],isGrayscale:l[3]}}}return s&&(e=new s(i(a)),e.$on("click",a[4])),{c(){e&&Y(e.$$.fragment),n=O()},l(l){e&&_e(e.$$.fragment,l),n=O()},m(l,r){e&&q(e,l,r),S(l,n,r),t=!0},p(l,r){const o={};if(r&1&&(o.imageSrc=l[0]),r&2&&(o.displacePower=l[1]),r&4&&(o.canvasId=l[2]),r&8&&(o.isGrayscale=l[3]),s!==(s=l[5].default)){if(e){B();const c=e;k(c.$$.fragment,1,0,()=>{L(c,1)}),G()}s?(e=new s(i(l)),e.$on("click",l[4]),Y(e.$$.fragment),h(e.$$.fragment,1),q(e,n.parentNode,n)):e=null}else s&&e.$set(o)},i(l){t||(e&&h(e.$$.fragment,l),t=!0)},o(l){e&&k(e.$$.fragment,l),t=!1},d(l){l&&d(n),e&&L(e,l)}}}function Fe(a){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function Te(a){let e,n,t={ctx:a,current:null,token:null,hasCatch:!1,pending:Fe,then:je,catch:Ge,value:5,blocks:[,,,]};return ge(we(()=>import("./PixiWater-611fe3a9.js"),["./PixiWater-611fe3a9.js","./index-a2ffde42.js","./pixi-7ebbcd1d.js","./index-3126fcd0.js","./index-2fbf4577.js","./index-104a2518.js","./store-53835ace.js","../assets/PixiWater-0f3a4b40.css"],import.meta.url),t),{c(){e=O(),t.block.c()},l(s){e=O(),t.block.l(s)},m(s,i){S(s,e,i),t.block.m(s,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(s,[i]){a=s,be(t,a,i)},i(s){n||(h(t.block),n=!0)},o(s){for(let i=0;i<3;i+=1){const l=t.blocks[i];k(l)}n=!1},d(s){s&&d(e),t.block.d(s),t.token=null,t=null}}}function We(a,e,n){let{imageSrc:t}=e,{displacePower:s=20}=e,{canvasId:i}=e,{isGrayscale:l=!1}=e;function r(o){se.call(this,a,o)}return a.$$set=o=>{"imageSrc"in o&&n(0,t=o.imageSrc),"displacePower"in o&&n(1,s=o.displacePower),"canvasId"in o&&n(2,i=o.canvasId),"isGrayscale"in o&&n(3,l=o.isGrayscale)},[t,s,i,l,r]}class He extends ${constructor(e){super(),K(this,e,We,Te,N,{imageSrc:0,displacePower:1,canvasId:2,isGrayscale:3})}}export{Ae as C,He as P,Ee as f};
