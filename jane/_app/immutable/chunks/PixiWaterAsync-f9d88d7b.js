import{P as de,S as Y,i as Q,s as N,e as O,b as P,g as B,t as k,d as G,f as d,h,Q as se,E as ie,k as w,l as I,m as E,n as v,p as M,O as ae,F as re,G as oe,H as ce,I as y,o as me,K as $,R as ue,A as g,L as J,q as T,a as A,r as W,c as H,u as fe,T as pe,D as ke,v as R,w as _e,x as q,y as K,U as be,V as ge}from"./index-b357ccce.js";import{_ as ve}from"./preload-helper-b21cceae.js";function ye(s){const e=.36363636363636365,n=8/11,t=9/10,i=4356/361,a=35442/1805,l=16061/1805,r=s*s;return s<e?7.5625*r:s<n?9.075*r-9.9*s+3.4:s<t?i*r-a*s+l:10.8*s*s-20.52*s+10.72}function we(s){const e=s-1;return e*e*e+1}function Ue(s){return-.5*(Math.cos(Math.PI*s)-1)}function Ie(s,{delay:e=0,duration:n=400,easing:t=de}={}){const i=+getComputedStyle(s).opacity;return{delay:e,duration:n,easing:t,css:a=>`opacity: ${a*i}`}}function L(s,{delay:e=0,duration:n=400,easing:t=we,x:i=0,y:a=0,opacity:l=0}={}){const r=getComputedStyle(s),o=+r.opacity,c=r.transform==="none"?"":r.transform,m=o*(1-l);return{delay:e,duration:n,easing:t,css:(S,D)=>`
			transform: ${c} translate(${(1-S)*i}px, ${(1-S)*a}px);
			opacity: ${o-m*D}`}}function Ee(s){let e,n,t,i;const a=s[4].default,l=ie(a,s,s[3],null);return{c(){e=w("button"),l&&l.c(),this.h()},l(r){e=I(r,"BUTTON",{type:!0,style:!0,class:!0});var o=E(e);l&&l.l(o),o.forEach(h),this.h()},h(){v(e,"type","button"),M(e,"width",s[1]),v(e,"class","svelte-1rsnc9j")},m(r,o){P(r,e,o),l&&l.m(e,null),n=!0,t||(i=ae(e,"click",s[5]),t=!0)},p(r,o){l&&l.p&&(!n||o&8)&&re(l,a,r,r[3],n?ce(a,r[3],o,null):oe(r[3]),null)},i(r){n||(d(l,r),n=!0)},o(r){k(l,r),n=!1},d(r){r&&h(e),l&&l.d(r),t=!1,i()}}}function Pe(s){let e,n,t;const i=s[4].default,a=ie(i,s,s[3],null);return{c(){e=w("a"),n=w("button"),a&&a.c(),this.h()},l(l){e=I(l,"A",{href:!0,style:!0,class:!0});var r=E(e);n=I(r,"BUTTON",{type:!0,style:!0,class:!0});var o=E(n);a&&a.l(o),o.forEach(h),r.forEach(h),this.h()},h(){v(n,"type","button"),M(n,"width",s[1]),v(n,"class","svelte-1rsnc9j"),v(e,"href",s[0]),M(e,"width",s[1]),v(e,"class","svelte-1rsnc9j")},m(l,r){P(l,e,r),y(e,n),a&&a.m(n,null),t=!0},p(l,r){a&&a.p&&(!t||r&8)&&re(a,i,l,l[3],t?ce(i,l[3],r,null):oe(l[3]),null),(!t||r&1)&&v(e,"href",l[0])},i(l){t||(d(a,l),t=!0)},o(l){k(a,l),t=!1},d(l){l&&h(e),a&&a.d(l)}}}function Se(s){let e,n,t,i;const a=[Pe,Ee],l=[];function r(o,c){return o[0]?0:1}return e=r(s),n=l[e]=a[e](s),{c(){n.c(),t=O()},l(o){n.l(o),t=O()},m(o,c){l[e].m(o,c),P(o,t,c),i=!0},p(o,[c]){let m=e;e=r(o),e===m?l[e].p(o,c):(B(),k(l[m],1,1,()=>{l[m]=null}),G(),n=l[e],n?n.p(o,c):(n=l[e]=a[e](o),n.c()),d(n,1),n.m(t.parentNode,t))},i(o){i||(d(n),i=!0)},o(o){k(n),i=!1},d(o){l[e].d(o),o&&h(t)}}}function De(s,e,n){let{$$slots:t={},$$scope:i}=e,{isFullWidth:a=!1}=e,{href:l=void 0}=e;const r=a?"100%":"auto";function o(c){se.call(this,s,c)}return s.$$set=c=>{"isFullWidth"in c&&n(2,a=c.isFullWidth),"href"in c&&n(0,l=c.href),"$$scope"in c&&n(3,i=c.$$scope)},[l,r,a,i,t,o]}class Ce extends Y{constructor(e){super(),Q(this,e,De,Se,N,{isFullWidth:2,href:0})}}const X=(s,e)=>{const n=s[e];return n===void 0?(console.error(`Dialog key ${String(e)} is unknown in dialogData`),{text:`Something went wrong with the dialog logic: "${String(e)}" key is unknown`,options:[]}):n};function Z(s,e,n){const t=s.slice();return t[6]=e[n],t}function x(s){let e,n,t,i,a,l=s[1]&&ee(s);return{c(){e=w("div"),l&&l.c(),this.h()},l(r){e=I(r,"DIV",{class:!0,style:!0});var o=E(e);l&&l.l(o),o.forEach(h),this.h()},h(){v(e,"class","marle-icon svelte-1k1r9r8"),M(e,"background-image","url('https://raw.githubusercontent.com/j-fan/marle-images/main/jane/img/marle_green.jpg')")},m(r,o){P(r,e,o),l&&l.m(e,null),t=!0,i||(a=ae(e,"introend",s[3]),i=!0)},p(r,o){s=r,s[1]?l?(l.p(s,o),o&2&&d(l,1)):(l=ee(s),l.c(),d(l,1),l.m(e,null)):l&&(B(),k(l,1,1,()=>{l=null}),G())},i(r){t||(d(l),n||$(()=>{n=ue(e,L,{y:40,duration:1e3,easing:ye}),n.start()}),t=!0)},o(r){k(l),t=!1},d(r){r&&h(e),l&&l.d(),i=!1,a()}}}function ee(s){let e,n=s[2],t,i,a=ne(s);return{c(){e=w("div"),a.c(),this.h()},l(l){e=I(l,"DIV",{class:!0});var r=E(e);a.l(r),r.forEach(h),this.h()},h(){v(e,"class","chat-wrapper svelte-1k1r9r8")},m(l,r){P(l,e,r),a.m(e,null),i=!0},p(l,r){r&4&&N(n,n=l[2])?(B(),k(a,1,1,g),G(),a=ne(l),a.c(),d(a,1),a.m(e,null)):a.p(l,r)},i(l){i||(d(a),$(()=>{t||(t=J(e,L,{y:20,duration:300,delay:500},!0)),t.run(1)}),i=!0)},o(l){k(a),t||(t=J(e,L,{y:20,duration:300,delay:500},!1)),t.run(0),i=!1},d(l){l&&h(e),a.d(l),l&&t&&t.end()}}}function te(s){let e,n;return{c(){e=w("h4"),n=T("YOU"),this.h()},l(t){e=I(t,"H4",{class:!0});var i=E(e);n=W(i,"YOU"),i.forEach(h),this.h()},h(){v(e,"class","svelte-1k1r9r8")},m(t,i){P(t,e,i),y(e,n)},d(t){t&&h(e)}}}function Oe(s){let e=s[6].text+"",n;return{c(){n=T(e)},l(t){n=W(t,e)},m(t,i){P(t,n,i)},p(t,i){i&4&&e!==(e=t[6].text+"")&&fe(n,e)},d(t){t&&h(n)}}}function le(s){let e,n;return e=new Ce({props:{isFullWidth:!0,$$slots:{default:[Oe]},$$scope:{ctx:s}}}),e.$on("click",function(){ke(s[4](s[6]))&&s[4](s[6]).apply(this,arguments)}),{c(){R(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){q(e,t,i),n=!0},p(t,i){s=t;const a={};i&516&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function ne(s){let e,n,t,i,a,l,r=s[2].text+"",o,c,m,S,D,C,b=s[2].options.length>0&&te(),V=s[2].options,_=[];for(let u=0;u<V.length;u+=1)_[u]=le(Z(s,V,u));const he=u=>k(_[u],1,1,()=>{_[u]=null});return{c(){e=w("div"),n=w("div"),t=w("h4"),i=T("Marle"),a=A(),l=w("p"),o=T(r),c=A(),m=w("div"),b&&b.c(),S=A();for(let u=0;u<_.length;u+=1)_[u].c();this.h()},l(u){e=I(u,"DIV",{class:!0});var p=E(e);n=I(p,"DIV",{class:!0});var f=E(n);t=I(f,"H4",{class:!0});var j=E(t);i=W(j,"Marle"),j.forEach(h),a=H(f),l=I(f,"P",{});var z=E(l);o=W(z,r),z.forEach(h),f.forEach(h),c=H(p),m=I(p,"DIV",{class:!0});var F=E(m);b&&b.l(F),S=H(F);for(let U=0;U<_.length;U+=1)_[U].l(F);F.forEach(h),p.forEach(h),this.h()},h(){v(t,"class","svelte-1k1r9r8"),v(n,"class","dialog-item left svelte-1k1r9r8"),v(m,"class","dialog-item right svelte-1k1r9r8"),v(e,"class","chat-content svelte-1k1r9r8")},m(u,p){P(u,e,p),y(e,n),y(n,t),y(t,i),y(n,a),y(n,l),y(l,o),y(e,c),y(e,m),b&&b.m(m,null),y(m,S);for(let f=0;f<_.length;f+=1)_[f].m(m,null);C=!0},p(u,p){if((!C||p&4)&&r!==(r=u[2].text+"")&&fe(o,r),u[2].options.length>0?b||(b=te(),b.c(),b.m(m,S)):b&&(b.d(1),b=null),p&20){V=u[2].options;let f;for(f=0;f<V.length;f+=1){const j=Z(u,V,f);_[f]?(_[f].p(j,p),d(_[f],1)):(_[f]=le(j),_[f].c(),d(_[f],1),_[f].m(m,null))}for(B(),f=V.length;f<_.length;f+=1)he(f);G()}},i(u){if(!C){for(let p=0;p<V.length;p+=1)d(_[p]);D||$(()=>{D=ue(e,Ie,{duration:400}),D.start()}),C=!0}},o(u){_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)k(_[p]);C=!1},d(u){u&&h(e),b&&b.d(),pe(_,u)}}}function Ve(s){let e,n,t=s[0]&&x(s);return{c(){t&&t.c(),e=O()},l(i){t&&t.l(i),e=O()},m(i,a){t&&t.m(i,a),P(i,e,a),n=!0},p(i,[a]){i[0]?t?(t.p(i,a),a&1&&d(t,1)):(t=x(i),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(B(),k(t,1,1,()=>{t=null}),G())},i(i){n||(d(t),n=!0)},o(i){k(t),n=!1},d(i){t&&t.d(i),i&&h(e)}}}function Be(s,e,n){let{dialogData:t}=e,i=!1,a=!1,l=t.start;me(()=>{n(0,i=!0)});const r=()=>{n(1,a=!a)},o=c=>async m=>{var D,C;m.stopPropagation(),n(2,l=X(t,c.nextKey));const S=await((D=l.onMount)==null?void 0:D.call(l));S&&n(2,l=X(t,S)),(C=c.onClick)==null||C.call(c)};return s.$$set=c=>{"dialogData"in c&&n(5,t=c.dialogData)},[i,a,l,r,o,t]}class Ae extends Y{constructor(e){super(),Q(this,e,Be,Ve,N,{dialogData:5})}}function Ge(s){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function je(s){let e,n,t;var i=s[5].default;function a(l){return{props:{imageSrc:l[0],displacePower:l[1],canvasId:l[2],isGrayscale:l[3]}}}return i&&(e=new i(a(s)),e.$on("click",s[4])),{c(){e&&R(e.$$.fragment),n=O()},l(l){e&&_e(e.$$.fragment,l),n=O()},m(l,r){e&&q(e,l,r),P(l,n,r),t=!0},p(l,r){const o={};if(r&1&&(o.imageSrc=l[0]),r&2&&(o.displacePower=l[1]),r&4&&(o.canvasId=l[2]),r&8&&(o.isGrayscale=l[3]),i!==(i=l[5].default)){if(e){B();const c=e;k(c.$$.fragment,1,0,()=>{K(c,1)}),G()}i?(e=new i(a(l)),e.$on("click",l[4]),R(e.$$.fragment),d(e.$$.fragment,1),q(e,n.parentNode,n)):e=null}else i&&e.$set(o)},i(l){t||(e&&d(e.$$.fragment,l),t=!0)},o(l){e&&k(e.$$.fragment,l),t=!1},d(l){l&&h(n),e&&K(e,l)}}}function Fe(s){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Me(s){let e,n,t={ctx:s,current:null,token:null,hasCatch:!1,pending:Fe,then:je,catch:Ge,value:5,blocks:[,,,]};return be(ve(()=>import("./PixiWater-339a8a8e.js"),["./PixiWater-339a8a8e.js","./index-b357ccce.js","./pixi-7ebbcd1d.js","./index-05d5dca7.js","./store-8a0a2259.js","../assets/PixiWater-0f3a4b40.css"],import.meta.url),t),{c(){e=O(),t.block.c()},l(i){e=O(),t.block.l(i)},m(i,a){P(i,e,a),t.block.m(i,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(i,[a]){s=i,ge(t,s,a)},i(i){n||(d(t.block),n=!0)},o(i){for(let a=0;a<3;a+=1){const l=t.blocks[a];k(l)}n=!1},d(i){i&&h(e),t.block.d(i),t.token=null,t=null}}}function Te(s,e,n){let{imageSrc:t}=e,{displacePower:i=20}=e,{canvasId:a}=e,{isGrayscale:l=!1}=e;function r(o){se.call(this,s,o)}return s.$$set=o=>{"imageSrc"in o&&n(0,t=o.imageSrc),"displacePower"in o&&n(1,i=o.displacePower),"canvasId"in o&&n(2,a=o.canvasId),"isGrayscale"in o&&n(3,l=o.isGrayscale)},[t,i,a,l,r]}class He extends Y{constructor(e){super(),Q(this,e,Te,Me,N,{imageSrc:0,displacePower:1,canvasId:2,isGrayscale:3})}}export{Ae as C,He as P,Ie as f,Ue as s};
