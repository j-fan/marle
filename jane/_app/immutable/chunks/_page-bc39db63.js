import{K as ye,S as G,i as J,s as K,e as E,b as $,g as B,t as m,d as O,f as h,h as u,L as ue,E as fe,k as y,l as w,m as I,n as v,p as H,M as C,F as de,G as _e,H as he,I as D,o as me,N as Q,O as pe,C as ge,A as b,P as Y,q,a as M,r as L,c as U,u as be,Q as we,D as Ie,v as j,w as Z,x as W,y as A,R as $e,T as De,J as ne}from"./index-8b297303.js";import{b as z}from"./paths-47524592.js";import{_ as Pe}from"./preload-helper-aa6bc0ce.js";import{d as Ee,w as Se}from"./index-827946fb.js";function Be(r){const e=.36363636363636365,l=8/11,t=9/10,a=4356/361,i=35442/1805,n=16061/1805,s=r*r;return r<e?7.5625*s:r<l?9.075*s-9.9*r+3.4:r<t?a*s-i*r+n:10.8*r*r-20.52*r+10.72}function Oe(r){const e=r-1;return e*e*e+1}function tt(r){return-.5*(Math.cos(Math.PI*r)-1)}function x(r,{delay:e=0,duration:l=400,easing:t=ye}={}){const a=+getComputedStyle(r).opacity;return{delay:e,duration:l,easing:t,css:i=>`opacity: ${i*a}`}}function ee(r,{delay:e=0,duration:l=400,easing:t=Oe,x:a=0,y:i=0,opacity:n=0}={}){const s=getComputedStyle(r),o=+s.opacity,c=s.transform==="none"?"":s.transform,p=o*(1-n);return{delay:e,duration:l,easing:t,css:(P,V)=>`
			transform: ${c} translate(${(1-P)*a}px, ${(1-P)*i}px);
			opacity: ${o-p*V}`}}function Ce(r){let e,l,t,a;const i=r[4].default,n=fe(i,r,r[3],null);return{c(){e=y("button"),n&&n.c(),this.h()},l(s){e=w(s,"BUTTON",{type:!0,style:!0,class:!0});var o=I(e);n&&n.l(o),o.forEach(u),this.h()},h(){v(e,"type","button"),H(e,"width",r[1]),v(e,"class","svelte-1rsnc9j")},m(s,o){$(s,e,o),n&&n.m(e,null),l=!0,t||(a=C(e,"click",r[5]),t=!0)},p(s,o){n&&n.p&&(!l||o&8)&&de(n,i,s,s[3],l?he(i,s[3],o,null):_e(s[3]),null)},i(s){l||(h(n,s),l=!0)},o(s){m(n,s),l=!1},d(s){s&&u(e),n&&n.d(s),t=!1,a()}}}function Ke(r){let e,l,t;const a=r[4].default,i=fe(a,r,r[3],null);return{c(){e=y("a"),l=y("button"),i&&i.c(),this.h()},l(n){e=w(n,"A",{href:!0,style:!0,class:!0});var s=I(e);l=w(s,"BUTTON",{type:!0,style:!0,class:!0});var o=I(l);i&&i.l(o),o.forEach(u),s.forEach(u),this.h()},h(){v(l,"type","button"),H(l,"width",r[1]),v(l,"class","svelte-1rsnc9j"),v(e,"href",r[0]),H(e,"width",r[1]),v(e,"class","svelte-1rsnc9j")},m(n,s){$(n,e,s),D(e,l),i&&i.m(l,null),t=!0},p(n,s){i&&i.p&&(!t||s&8)&&de(i,a,n,n[3],t?he(a,n[3],s,null):_e(n[3]),null),(!t||s&1)&&v(e,"href",n[0])},i(n){t||(h(i,n),t=!0)},o(n){m(i,n),t=!1},d(n){n&&u(e),i&&i.d(n)}}}function Ve(r){let e,l,t,a;const i=[Ke,Ce],n=[];function s(o,c){return o[0]?0:1}return e=s(r),l=n[e]=i[e](r),{c(){l.c(),t=E()},l(o){l.l(o),t=E()},m(o,c){n[e].m(o,c),$(o,t,c),a=!0},p(o,[c]){let p=e;e=s(o),e===p?n[e].p(o,c):(B(),m(n[p],1,1,()=>{n[p]=null}),O(),l=n[e],l?l.p(o,c):(l=n[e]=i[e](o),l.c()),h(l,1),l.m(t.parentNode,t))},i(o){a||(h(l),a=!0)},o(o){m(l),a=!1},d(o){n[e].d(o),o&&u(t)}}}function Te(r,e,l){let{$$slots:t={},$$scope:a}=e,{isFullWidth:i=!1}=e,{href:n=void 0}=e;const s=i?"100%":"auto";function o(c){ue.call(this,r,c)}return r.$$set=c=>{"isFullWidth"in c&&l(2,i=c.isFullWidth),"href"in c&&l(0,n=c.href),"$$scope"in c&&l(3,a=c.$$scope)},[n,s,i,a,t,o]}class Ne extends G{constructor(e){super(),J(this,e,Te,Ve,K,{isFullWidth:2,href:0})}}const je=(r,e)=>{const l=r[e];return l===void 0?(console.error(`Dialog key ${String(e)} is unknown in dialogData`),{text:`Something went wrong with the dialog logic: "${String(e)}" key is unknown`,options:[]}):l};function le(r,e,l){const t=r.slice();return t[6]=e[l],t}function se(r){let e,l,t,a,i,n=r[1]&&re(r);return{c(){e=y("div"),n&&n.c(),this.h()},l(s){e=w(s,"DIV",{class:!0,style:!0});var o=I(e);n&&n.l(o),o.forEach(u),this.h()},h(){v(e,"class","marle-icon svelte-b1nlnt"),H(e,"background-image","url('"+z+"/img/marle_green.jpg')")},m(s,o){$(s,e,o),n&&n.m(e,null),t=!0,a||(i=[C(e,"click",r[3]),C(e,"introend",r[3])],a=!0)},p(s,o){r=s,r[1]?n?(n.p(r,o),o&2&&h(n,1)):(n=re(r),n.c(),h(n,1),n.m(e,null)):n&&(B(),m(n,1,1,()=>{n=null}),O())},i(s){t||(h(n),l||Q(()=>{l=pe(e,ee,{y:40,duration:1e3,easing:Be}),l.start()}),t=!0)},o(s){m(n),t=!1},d(s){s&&u(e),n&&n.d(),a=!1,ge(i)}}}function re(r){let e,l=r[2],t,a,i=oe(r);return{c(){e=y("div"),i.c(),this.h()},l(n){e=w(n,"DIV",{class:!0});var s=I(e);i.l(s),s.forEach(u),this.h()},h(){v(e,"class","chat-wrapper svelte-b1nlnt")},m(n,s){$(n,e,s),i.m(e,null),a=!0},p(n,s){s&4&&K(l,l=n[2])?(B(),m(i,1,1,b),O(),i=oe(n),i.c(),h(i,1),i.m(e,null)):i.p(n,s)},i(n){a||(h(i),Q(()=>{t||(t=Y(e,ee,{y:20,duration:300,delay:500},!0)),t.run(1)}),a=!0)},o(n){m(i),t||(t=Y(e,ee,{y:20,duration:300,delay:500},!1)),t.run(0),a=!1},d(n){n&&u(e),i.d(n),n&&t&&t.end()}}}function ae(r){let e,l;return{c(){e=y("h4"),l=q("YOU"),this.h()},l(t){e=w(t,"H4",{class:!0});var a=I(e);l=L(a,"YOU"),a.forEach(u),this.h()},h(){v(e,"class","svelte-b1nlnt")},m(t,a){$(t,e,a),D(e,l)},d(t){t&&u(e)}}}function We(r){let e=r[6].text+"",l;return{c(){l=q(e)},l(t){l=L(t,e)},m(t,a){$(t,l,a)},p(t,a){a&4&&e!==(e=t[6].text+"")&&be(l,e)},d(t){t&&u(l)}}}function ie(r){let e,l;return e=new Ne({props:{isFullWidth:!0,$$slots:{default:[We]},$$scope:{ctx:r}}}),e.$on("click",function(){Ie(r[4](r[6]))&&r[4](r[6]).apply(this,arguments)}),{c(){j(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,a){W(e,t,a),l=!0},p(t,a){r=t;const i={};a&516&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function oe(r){let e,l,t,a,i,n,s=r[2].text+"",o,c,p,P,V,T,k=r[2].options.length>0&&ae(),S=r[2].options,_=[];for(let f=0;f<S.length;f+=1)_[f]=ie(le(r,S,f));const ke=f=>m(_[f],1,1,()=>{_[f]=null});return{c(){e=y("div"),l=y("div"),t=y("h4"),a=q("Marle"),i=M(),n=y("p"),o=q(s),c=M(),p=y("div"),k&&k.c(),P=M();for(let f=0;f<_.length;f+=1)_[f].c();this.h()},l(f){e=w(f,"DIV",{class:!0});var g=I(e);l=w(g,"DIV",{class:!0});var d=I(l);t=w(d,"H4",{class:!0});var N=I(t);a=L(N,"Marle"),N.forEach(u),i=U(d),n=w(d,"P",{});var te=I(n);o=L(te,s),te.forEach(u),d.forEach(u),c=U(g),p=w(g,"DIV",{class:!0});var F=I(p);k&&k.l(F),P=U(F);for(let X=0;X<_.length;X+=1)_[X].l(F);F.forEach(u),g.forEach(u),this.h()},h(){v(t,"class","svelte-b1nlnt"),v(l,"class","dialog-item left svelte-b1nlnt"),v(p,"class","dialog-item right svelte-b1nlnt"),v(e,"class","chat-content svelte-b1nlnt")},m(f,g){$(f,e,g),D(e,l),D(l,t),D(t,a),D(l,i),D(l,n),D(n,o),D(e,c),D(e,p),k&&k.m(p,null),D(p,P);for(let d=0;d<_.length;d+=1)_[d].m(p,null);T=!0},p(f,g){if((!T||g&4)&&s!==(s=f[2].text+"")&&be(o,s),f[2].options.length>0?k||(k=ae(),k.c(),k.m(p,P)):k&&(k.d(1),k=null),g&20){S=f[2].options;let d;for(d=0;d<S.length;d+=1){const N=le(f,S,d);_[d]?(_[d].p(N,g),h(_[d],1)):(_[d]=ie(N),_[d].c(),h(_[d],1),_[d].m(p,null))}for(B(),d=S.length;d<_.length;d+=1)ke(d);O()}},i(f){if(!T){for(let g=0;g<S.length;g+=1)h(_[g]);V||Q(()=>{V=pe(e,x,{duration:400}),V.start()}),T=!0}},o(f){_=_.filter(Boolean);for(let g=0;g<_.length;g+=1)m(_[g]);T=!1},d(f){f&&u(e),k&&k.d(),we(_,f)}}}function Ae(r){let e,l,t=r[0]&&se(r);return{c(){t&&t.c(),e=E()},l(a){t&&t.l(a),e=E()},m(a,i){t&&t.m(a,i),$(a,e,i),l=!0},p(a,[i]){a[0]?t?(t.p(a,i),i&1&&h(t,1)):(t=se(a),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(B(),m(t,1,1,()=>{t=null}),O())},i(a){l||(h(t),l=!0)},o(a){m(t),l=!1},d(a){t&&t.d(a),a&&u(e)}}}function Fe(r,e,l){let{dialogData:t}=e,a=!1,i=!1,n=t.start;me(()=>{l(0,a=!0)});const s=()=>{l(1,i=!i)},o=c=>p=>{var P;p.stopPropagation(),l(2,n=je(t,c.nextKey)),(P=c.onClick)==null||P.call(c)};return r.$$set=c=>{"dialogData"in c&&l(5,t=c.dialogData)},[a,i,n,s,o,t]}class Me extends G{constructor(e){super(),J(this,e,Fe,Ae,K,{dialogData:5})}}function Ue(r){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function ze(r){let e,l,t;var a=r[4].default;function i(n){return{props:{imageSrc:n[0],displacePower:n[1],canvasId:n[2]}}}return a&&(e=new a(i(r)),e.$on("click",r[3])),{c(){e&&j(e.$$.fragment),l=E()},l(n){e&&Z(e.$$.fragment,n),l=E()},m(n,s){e&&W(e,n,s),$(n,l,s),t=!0},p(n,s){const o={};if(s&1&&(o.imageSrc=n[0]),s&2&&(o.displacePower=n[1]),s&4&&(o.canvasId=n[2]),a!==(a=n[4].default)){if(e){B();const c=e;m(c.$$.fragment,1,0,()=>{A(c,1)}),O()}a?(e=new a(i(n)),e.$on("click",n[3]),j(e.$$.fragment),h(e.$$.fragment,1),W(e,l.parentNode,l)):e=null}else a&&e.$set(o)},i(n){t||(e&&h(e.$$.fragment,n),t=!0)},o(n){e&&m(e.$$.fragment,n),t=!1},d(n){n&&u(l),e&&A(e,n)}}}function He(r){return{c:b,l:b,m:b,p:b,i:b,o:b,d:b}}function Ye(r){let e,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:He,then:ze,catch:Ue,value:4,blocks:[,,,]};return $e(Pe(()=>import("./PixiWater-5860d990.js"),["PixiWater-5860d990.js","../assets/PixiWater-0f3a4b40.css","index-8b297303.js","paths-47524592.js","index-827946fb.js"],import.meta.url),t),{c(){e=E(),t.block.c()},l(a){e=E(),t.block.l(a)},m(a,i){$(a,e,i),t.block.m(a,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(a,[i]){r=a,De(t,r,i)},i(a){l||(h(t.block),l=!0)},o(a){for(let i=0;i<3;i+=1){const n=t.blocks[i];m(n)}l=!1},d(a){a&&u(e),t.block.d(a),t.token=null,t=null}}}function qe(r,e,l){let{imageSrc:t}=e,{displacePower:a=20}=e,{canvasId:i}=e;function n(s){ue.call(this,r,s)}return r.$$set=s=>{"imageSrc"in s&&l(0,t=s.imageSrc),"displacePower"in s&&l(1,a=s.displacePower),"canvasId"in s&&l(2,i=s.canvasId)},[t,a,i,n]}class Le extends G{constructor(e){super(),J(this,e,qe,Ye,K,{imageSrc:0,displacePower:1,canvasId:2})}}const ve={noise:`${z}/img/noise.jpg`,bluebird:`${z}/img/bluebird.jpg`,spots:`${z}/img/spots.jpg`},R=Se(""),Re=Ee(R,r=>r.replaceAll(/[^a-zA-Z ]/g,"")),Ge={start:{text:"Do you ever dream? What is it like? I heard that humans do this when they sleep.",options:[{text:"I think I dream, but I don\u2019t remember them.",nextKey:"forgotten_dream",onClick:()=>{R.set(ve.spots)}},{text:"Yes, I dream all the time",nextKey:"always_dream"},{text:"I don\u2019t dream at all",nextKey:"no_dream"}]},forgotten_dream:{text:"That's a shame. But perhaps you can help me with this new experience that I am having.",options:[{text:"I can try...",nextKey:"ending"}]},always_dream:{text:"Then you must be an expert. I wonder if you can help me interpret what I am seeing.",options:[{text:"Ok, sure",nextKey:"ending"}]},no_dream:{text:"That's very strange. In my notes about humans I thought that dreaming was a regular activity. But perhaps you can help with this issue I am having anyway.",options:[{text:"I'll try to help.",nextKey:"ending"}]},ending:{text:"End of conversation",options:[]}};function ce(r){let e,l,t,a,i,n;return l=new Le({props:{canvasId:r[2],imageSrc:r[1],displacePower:r[0]}}),{c(){e=y("div"),j(l.$$.fragment),this.h()},l(s){e=w(s,"DIV",{class:!0});var o=I(e);Z(l.$$.fragment,o),o.forEach(u),this.h()},h(){v(e,"class","full-size svelte-1g1d22d")},m(s,o){$(s,e,o),W(l,e,null),a=!0,i||(n=[C(e,"introstart",r[3]),C(e,"introend",r[4]),C(e,"outrostart",r[5])],i=!0)},p(s,o){const c={};o&4&&(c.canvasId=s[2]),o&2&&(c.imageSrc=s[1]),o&1&&(c.displacePower=s[0]),l.$set(c)},i(s){a||(h(l.$$.fragment,s),Q(()=>{t||(t=Y(e,x,{duration:600},!0)),t.run(1)}),a=!0)},o(s){m(l.$$.fragment,s),t||(t=Y(e,x,{duration:600},!1)),t.run(0),a=!1},d(s){s&&u(e),A(l),s&&t&&t.end(),i=!1,ge(n)}}}function Je(r){let e,l=r[1],t,a,i,n=ce(r);return a=new Me({props:{dialogData:Ge}}),{c(){e=y("div"),n.c(),t=M(),j(a.$$.fragment),this.h()},l(s){e=w(s,"DIV",{class:!0});var o=I(e);n.l(o),t=U(o),Z(a.$$.fragment,o),o.forEach(u),this.h()},h(){v(e,"class","full-size svelte-1g1d22d")},m(s,o){$(s,e,o),n.m(e,null),D(e,t),W(a,e,null),i=!0},p(s,[o]){o&2&&K(l,l=s[1])?(B(),m(n,1,1,b),O(),n=ce(s),n.c(),h(n,1),n.m(e,t)):n.p(s,o)},i(s){i||(h(n),h(a.$$.fragment,s),i=!0)},o(s){m(n),m(a.$$.fragment,s),i=!1},d(s){s&&u(e),n.d(s),A(a)}}}function Qe(r,e,l){let t,a;ne(r,R,c=>l(1,t=c)),ne(r,Re,c=>l(2,a=c));let i=20;return me(()=>{R.set(ve.noise)}),[i,t,a,()=>{l(0,i=300)},()=>{l(0,i=20)},()=>{l(0,i=300)}]}class nt extends G{constructor(e){super(),J(this,e,Qe,Je,K,{})}}export{nt as P,tt as s};
