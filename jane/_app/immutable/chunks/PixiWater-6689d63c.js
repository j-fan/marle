import{W as _,X as C,Y as E,K as k,S as v,i as D,s as j,k as I,l as T,m as O,h as b,n as x,b as W,M as q,A as P,J as M,o as F,L as N}from"./index-98f8310d.js";import{A as R,S,W as z,f as J,C as K,s as L}from"./_page-aa2d35d9.js";import{b as V}from"./paths-e0f500b8.js";import{w as X}from"./index-0522bc4a.js";function A(e){return Object.prototype.toString.call(e)==="[object Date]"}function h(e,t){if(e===t||e!==e)return()=>e;const s=typeof e;if(s!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((a,r)=>h(e[r],a));return a=>i.map(r=>r(a))}if(s==="object"){if(!e||!t)throw new Error("Object cannot be null");if(A(e)&&A(t)){e=e.getTime(),t=t.getTime();const r=t-e;return n=>new Date(e+n*r)}const i=Object.keys(t),a={};return i.forEach(r=>{a[r]=h(e[r],t[r])}),r=>{const n={};return i.forEach(c=>{n[c]=a[c](r)}),n}}if(s==="number"){const i=t-e;return a=>e+a*i}throw new Error(`Cannot interpolate ${s} values`)}function Y(e,t={}){const s=X(e);let i,a=e;function r(n,c){if(e==null)return s.set(e=n),Promise.resolve();a=n;let o=i,d=!1,{delay:u=0,duration:f=400,easing:l=k,interpolate:p=h}=_(_({},t),c);if(f===0)return o&&(o.abort(),o=null),s.set(e=a),Promise.resolve();const m=C()+u;let y;return i=E(g=>{if(g<m)return!0;d||(y=p(e,n),typeof f=="function"&&(f=f(e,n)),d=!0),o&&(o.abort(),o=null);const w=g-m;return w>f?(s.set(e=n),!1):(s.set(e=y(l(w/f))),!0)}),i.promise}return{set:r,update:(n,c)=>r(n(a,e),c),subscribe:s.subscribe}}function B(e){let t,s,i,a;return{c(){t=I("div"),this.h()},l(r){t=T(r,"DIV",{class:!0}),O(t).forEach(b),this.h()},h(){x(t,"class",s=e[0]+" pixi-canvas svelte-1k5qfmg")},m(r,n){W(r,t,n),i||(a=q(t,"click",e[5]),i=!0)},p(r,[n]){n&1&&s!==(s=r[0]+" pixi-canvas svelte-1k5qfmg")&&x(t,"class",s)},i:P,o:P,d(r){r&&b(t),i=!1,a()}}}function G(e,t,s){let i,{imageSrc:a}=t,{displacePower:r=20}=t,{canvasId:n}=t;const c=new R({resizeTo:document.body}),o=S.from(`${V}/img/displacement_map.jpeg`);o.texture.baseTexture.wrapMode=z.REPEAT;const d=new J.DisplacementFilter(o),u=Y(0,{duration:600,easing:L});M(e,u,l=>s(4,i=l)),F(()=>{document.querySelector(`.${n}`).appendChild(c.view),c.stage.interactive=!0;const p=new K;c.stage.addChild(p);const m=S.from(a);return p.addChild(m),c.stage.addChild(o),m.filters=[d],d.padding=10,d.scale.x=r,d.scale.y=r,c.ticker.add(()=>{o.x++,o.x>o.width&&(o.x=0)}),()=>{c.destroy(!0)}});function f(l){N.call(this,e,l)}return e.$$set=l=>{"imageSrc"in l&&s(2,a=l.imageSrc),"displacePower"in l&&s(3,r=l.displacePower),"canvasId"in l&&s(0,n=l.canvasId)},e.$$.update=()=>{e.$$.dirty&8&&u.set(r),e.$$.dirty&16&&(d.scale.x=i,d.scale.y=i)},[n,u,a,r,i,f]}class $ extends v{constructor(t){super(),D(this,t,G,B,j,{imageSrc:2,displacePower:3,canvasId:0})}}export{$ as default};
