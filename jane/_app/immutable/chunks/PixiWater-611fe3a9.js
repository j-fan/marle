import{S as b,i as P,s as C,k as W,l as k,m as D,h as y,n as f,b as I,L as A,A as _,J as j,o as q,Y as E}from"./index-a2ffde42.js";import{A as G,S as v,W as H,f as T,C as F}from"./pixi-7ebbcd1d.js";import{t as M}from"./index-3126fcd0.js";import{s as N}from"./index-104a2518.js";import{g as x}from"./store-53835ace.js";function O(s){let e,n,l,i,r;return{c(){e=W("div"),this.h()},l(a){e=k(a,"DIV",{class:!0,style:!0}),D(e).forEach(y),this.h()},h(){f(e,"class",n=s[0]+" pixi-canvas svelte-1k5qfmg"),f(e,"style",l=s[1]?"filter: grayscale();":void 0)},m(a,c){I(a,e,c),i||(r=A(e,"click",s[6]),i=!0)},p(a,[c]){c&1&&n!==(n=a[0]+" pixi-canvas svelte-1k5qfmg")&&f(e,"class",n),c&2&&l!==(l=a[1]?"filter: grayscale();":void 0)&&f(e,"style",l)},i:_,o:_,d(a){a&&y(e),i=!1,r()}}}function R(s,e,n){let l,{imageSrc:i}=e,{displacePower:r=20}=e,{canvasId:a}=e,{isGrayscale:c=!1}=e;const o=new G({resizeTo:document.body}),d=v.from("https://raw.githubusercontent.com/j-fan/marle-images/main/jane/img/displacement_map.jpeg");d.texture.baseTexture.wrapMode=H.REPEAT;const m=new T.DisplacementFilter(d),u=M(0,{duration:600,easing:N});j(s,u,t=>n(5,l=t)),q(()=>{document.querySelector(`.${a}`).appendChild(o.view),o.stage.interactive=!0;const p=new F;o.stage.addChild(p);const h=v.from(i);if(typeof i=="object"&&"clientHeight"in i){const{width:g,height:w}=x(i.clientWidth,i.clientHeight,window.innerWidth,window.innerHeight);h.width=g,h.height=w}else if(typeof i=="string"){const{width:g,height:w}=x(16,9,window.innerWidth,window.innerHeight);h.width=g,h.height=w}return p.addChild(h),o.stage.addChild(d),h.filters=[m],m.padding=10,m.scale.x=r,m.scale.y=r,o.ticker.add(()=>{d.x++,d.x>d.width&&(d.x=0)}),()=>{o.destroy(!0)}});function S(t){E.call(this,s,t)}return s.$$set=t=>{"imageSrc"in t&&n(3,i=t.imageSrc),"displacePower"in t&&n(4,r=t.displacePower),"canvasId"in t&&n(0,a=t.canvasId),"isGrayscale"in t&&n(1,c=t.isGrayscale)},s.$$.update=()=>{s.$$.dirty&16&&u.set(r),s.$$.dirty&32&&(m.scale.x=l,m.scale.y=l)},[a,c,u,i,r,l,S]}class B extends b{constructor(e){super(),P(this,e,R,O,C,{imageSrc:3,displacePower:4,canvasId:0,isGrayscale:1})}}export{B as default};
