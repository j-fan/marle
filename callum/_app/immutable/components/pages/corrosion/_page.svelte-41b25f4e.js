import{S as oe,i as ce,s as ue,k as R,l as S,m as G,h as y,H as $,n as h,p as D,b as L,F as w,A as ne,a as O,q as z,e as ae,I as _e,c as j,r as B,J as ie,K as F,u as ge,f as J,t as ee,d as ve,L as ye,o as pe,M as Me,v as xe,w as we,x as be,y as ke,g as Ee,N as Ie,O as Ce}from"../../../chunks/index-9b018a34.js";import{r as Te,t as re,i as fe,o as Pe}from"../../../chunks/toNumber-52698f6d.js";var Re=function(){return Te.Date.now()};const Q=Re;var Se="Expected a function",Ae=Math.max,Le=Math.min;function Ne(s,n,e){var a,i,f,m,o,c,M=0,d=!1,I=!1,b=!0;if(typeof s!="function")throw new TypeError(Se);n=re(n)||0,fe(e)&&(d=!!e.leading,I="maxWait"in e,f=I?Ae(re(e.maxWait)||0,n):f,b="trailing"in e?!!e.trailing:b);function k(r){var _=a,p=i;return a=i=void 0,M=r,m=s.apply(p,_),m}function q(r){return M=r,o=setTimeout(T,n),d?k(r):m}function C(r){var _=r-c,p=r-M,l=n-_;return I?Le(l,f-p):l}function N(r){var _=r-c,p=r-M;return c===void 0||_>=n||_<0||I&&p>=f}function T(){var r=Q();if(N(r))return x(r);o=setTimeout(T,C(r))}function x(r){return o=void 0,b&&a?k(r):(a=i=void 0,m)}function H(){o!==void 0&&clearTimeout(o),M=0,a=c=i=o=void 0}function u(){return o===void 0?m:x(Q())}function g(){var r=Q(),_=N(r);if(a=arguments,i=this,c=r,_){if(o===void 0)return q(c);if(I)return clearTimeout(o),o=setTimeout(T,n),k(c)}return o===void 0&&(o=setTimeout(T,n)),m}return g.cancel=H,g.flush=u,g}var We="Expected a function";function qe(s,n,e){var a=!0,i=!0;if(typeof s!="function")throw new TypeError(We);return fe(e)&&(a="leading"in e?!!e.leading:a,i="trailing"in e?!!e.trailing:i),Ne(s,n,{leading:a,maxWait:n,trailing:i})}function De(s){let n,e,a;return{c(){n=R("a"),e=R("img"),this.h()},l(i){n=S(i,"A",{href:!0});var f=G(n);e=S(f,"IMG",{src:!0,alt:!0,style:!0,class:!0}),f.forEach(y),this.h()},h(){$(e.src,a=s[4])||h(e,"src",a),h(e,"alt","gylph to click"),D(e,"--colour",s[3]),D(e,"--random-anim-delay",s[5]+"s"),D(e,"--x",s[1]+"%"),D(e,"--y",s[2]+"%"),h(e,"class","svelte-129x1q3"),h(n,"href",s[0])},m(i,f){L(i,n,f),w(n,e)},p(i,[f]){f&16&&!$(e.src,a=i[4])&&h(e,"src",a),f&8&&D(e,"--colour",i[3]),f&2&&D(e,"--x",i[1]+"%"),f&4&&D(e,"--y",i[2]+"%"),f&1&&h(n,"href",i[0])},i:ne,o:ne,d(i){i&&y(n)}}}function Oe(s,n,e){let a,{href:i}=n,{glyphId:f=1}=n,{xPos:m}=n,{yPos:o}=n,{colour:c="#00ff00"}=n,M=-Math.random()*3;return s.$$set=d=>{"href"in d&&e(0,i=d.href),"glyphId"in d&&e(6,f=d.glyphId),"xPos"in d&&e(1,m=d.xPos),"yPos"in d&&e(2,o=d.yPos),"colour"in d&&e(3,c=d.colour)},s.$$.update=()=>{s.$$.dirty&64&&e(4,a=`https://raw.githubusercontent.com/j-fan/marle-images/main/glyph/g${f}.png`)},[i,m,o,c,a,M,f]}class je extends oe{constructor(n){super(),ce(this,n,Oe,De,ue,{href:0,glyphId:6,xPos:1,yPos:2,colour:3})}}const{window:Z}=Me;function le(s){let n,e;return n=new je({props:{href:"https://j-fan.github.io/marle/jordan-pat/video",xPos:3,yPos:50,glyphId:4,colour:"#9EA9E9"}}),{c(){xe(n.$$.fragment)},l(a){we(n.$$.fragment,a)},m(a,i){be(n,a,i),e=!0},i(a){e||(J(n.$$.fragment,a),e=!0)},o(a){ee(n.$$.fragment,a),e=!1},d(a){ke(n,a)}}}function Ge(s){let n,e,a,i,f,m,o,c,M,d,I,b,k,q,C,N,T,x,H,u,g,r,_,p,l=s[2]&&le();return{c(){n=O(),e=R("canvas"),a=O(),i=R("div"),f=O(),m=R("div"),o=R("div"),c=R("input"),M=O(),d=R("label"),I=z("Mask "),b=z(s[1]),k=z("%"),q=O(),C=R("h2"),N=z("I can feel my mind expanding..."),T=O(),x=R("img"),u=O(),l&&l.c(),g=ae(),this.h()},l(t){_e('[data-svelte="svelte-1wyrjnx"]',document.head).forEach(y),n=j(t),e=S(t,"CANVAS",{id:!0,class:!0}),G(e).forEach(y),a=j(t),i=S(t,"DIV",{class:!0}),G(i).forEach(y),f=j(t),m=S(t,"DIV",{class:!0});var P=G(m);o=S(P,"DIV",{id:!0,class:!0});var E=G(o);c=S(E,"INPUT",{id:!0,type:!0,name:!0,min:!0,max:!0}),M=j(E),d=S(E,"LABEL",{for:!0});var W=G(d);I=B(W,"Mask "),b=B(W,s[1]),k=B(W,"%"),W.forEach(y),E.forEach(y),q=j(P),C=S(P,"H2",{class:!0});var A=G(C);N=B(A,"I can feel my mind expanding..."),A.forEach(y),T=j(P),x=S(P,"IMG",{id:!0,class:!0,alt:!0,src:!0}),P.forEach(y),u=j(t),l&&l.l(t),g=ae(),this.h()},h(){document.title="Origin:Marle - Corrosion - Callum Howard",h(e,"id","canvas"),h(e,"class","fixed"),h(i,"class","fixed top-0 left-0 w-full h-full vignette svelte-55c46d"),h(c,"id","mask"),h(c,"type","range"),h(c,"name","mask"),h(c,"min",0),h(c,"max",100),h(d,"for","mask"),h(o,"id","debug"),h(o,"class","hidden"),h(C,"class","fixed italic font-serif text-4xl font-black mx-32 my-32 select-none expand-text svelte-55c46d"),h(x,"id","silhouette"),h(x,"class","fixed bottom-0 m-auto left-0 right-0 opacity-70 hue-rotate-30 select-none"),h(x,"alt","silhouette"),$(x.src,H="https://raw.githubusercontent.com/CallumHoward/marle-media/main/silhouette.png")||h(x,"src",H),h(m,"class","absolute w-screen h-full")},m(t,v){L(t,n,v),L(t,e,v),s[7](e),L(t,a,v),L(t,i,v),L(t,f,v),L(t,m,v),w(m,o),w(o,c),ie(c,s[1]),w(o,M),w(o,d),w(d,I),w(d,b),w(d,k),w(m,q),w(m,C),w(C,N),w(m,T),w(m,x),L(t,u,v),l&&l.m(t,v),L(t,g,v),r=!0,_||(p=[F(Z,"mousemove",s[3]),F(Z,"touchmove",s[3]),F(Z,"resize",s[6]),F(e,"click",s[5]),F(c,"change",s[8]),F(c,"input",s[8])],_=!0)},p(t,[v]){v&2&&ie(c,t[1]),(!r||v&2)&&ge(b,t[1]),t[2]?l?v&4&&J(l,1):(l=le(),l.c(),J(l,1),l.m(g.parentNode,g)):l&&(Ee(),ee(l,1,1,()=>{l=null}),ve())},i(t){r||(J(l),r=!0)},o(t){ee(l),r=!1},d(t){t&&y(n),t&&y(e),s[7](null),t&&y(a),t&&y(i),t&&y(f),t&&y(m),t&&y(u),l&&l.d(t),t&&y(g),_=!1,ye(p)}}}const se="^|&";function He(s,n,e){let a,i,f,m,o=80,c={x:0,y:0},M=!1;const d=u=>{u instanceof MouseEvent?(c.x=u.clientX,c.y=u.clientY):(c.x=u.touches[0].clientX,c.y=u.touches[0].clientY),e(1,o-=.05)},I=()=>{if(!a){console.error("Canvas not initialized!");return}i=a.getContext("2d"),b()},b=()=>{f=e(0,a.width=window.innerWidth,a),m=e(0,a.height=window.innerHeight,a)},k=()=>{i.fillStyle="white",i.fillRect(0,0,f,m),i.fillStyle="black";const u=30,g=Math.ceil(f/u),r=Math.ceil(m/u),_=9,p=Math.pow(2,_*2),l=Math.round(Math.random()*p),t=Math.floor(Math.random()*se.length),v=g*o/100/2,P=g-v,E=r*o/100/2,W=r-E,A=g*(100-o)/100/2,K=Math.ceil(c.x/u),te=Math.ceil(c.y/u),U=5;for(let V=v;V<P;V++){const Y=Math.round((Math.random()-.5)*U);for(let X=E+Y;X<W-Y;X++){const me=Math.round((Math.random()-.5)*U);if(!N(K,te,A,V+me,X+Y))continue;const de=V*u,he=X*u;q(de,he,u,l,t,_)}}},q=(u,g,r,_,p,l)=>{i.save(),i.translate(u+r/2,g+r/2);const t=r/l,v=_.toString(2),P=Math.floor(Math.random()*4)*Math.PI/2;i.rotate(P);for(let E=0;E<l;E++){const W=v[E];for(let A=0;A<l;A++){const K=v[A+l];if(C(W,K,p)){const U=-r/2+E*t,V=-r/2+A*t;i.fillRect(U,V,t,t)}}}i.restore()},C=(u,g,r)=>{const _=se[r];return{"^":(l,t)=>l^t,"&":(l,t)=>l&t,"|":(l,t)=>l|t}[_](u,g)},N=(u,g,r,_,p)=>(u-_)*(u-_)+(g-p)*(g-p)<=r*r;pe(()=>{I(),k(),setTimeout(()=>{e(2,M=!0)},3e4),Pe(k,100)});const T=()=>{b(),qe(k,100,{leading:!0})};function x(u){Ie[u?"unshift":"push"](()=>{a=u,e(0,a)})}function H(){o=Ce(this.value),e(1,o)}return[a,o,M,d,b,k,T,x,H]}class Ue extends oe{constructor(n){super(),ce(this,n,He,Ge,ue,{})}}export{Ue as default};
