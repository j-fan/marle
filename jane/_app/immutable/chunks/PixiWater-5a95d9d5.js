import{a0 as P,a1 as E,a2 as T,R as C,S as j,i as v,s as k,k as D,l as I,m as M,h as S,n as y,b as O,M as W,A as b,J as q,o as G,T as R}from"./index-10565635.js";import{A as F,S as N,W as A,f as z,C as H,T as J}from"./pixi-06fbc2da.js";import{w as V}from"./index-e56b14df.js";import{s as B}from"./ChatBot-57eb2f31.js";function x(e){return Object.prototype.toString.call(e)==="[object Date]"}function g(e,t){if(e===t||e!==e)return()=>e;const s=typeof e;if(s!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map((a,i)=>g(e[i],a));return a=>n.map(i=>i(a))}if(s==="object"){if(!e||!t)throw new Error("Object cannot be null");if(x(e)&&x(t)){e=e.getTime(),t=t.getTime();const i=t-e;return r=>new Date(e+r*i)}const n=Object.keys(t),a={};return n.forEach(i=>{a[i]=g(e[i],t[i])}),i=>{const r={};return n.forEach(c=>{r[c]=a[c](i)}),r}}if(s==="number"){const n=t-e;return a=>e+a*n}throw new Error(`Cannot interpolate ${s} values`)}function K(e,t={}){const s=V(e);let n,a=e;function i(r,c){if(e==null)return s.set(e=r),Promise.resolve();a=r;let l=n,d=!1,{delay:u=0,duration:f=400,easing:h=C,interpolate:o=g}=P(P({},t),c);if(f===0)return l&&(l.abort(),l=null),s.set(e=a),Promise.resolve();const m=E()+u;let p;return n=T(w=>{if(w<m)return!0;d||(p=o(e,r),typeof f=="function"&&(f=f(e,r)),d=!0),l&&(l.abort(),l=null);const _=w-m;return _>f?(s.set(e=r),!1):(s.set(e=p(h(_/f))),!0)}),n.promise}return{set:i,update:(r,c)=>i(r(a,e),c),subscribe:s.subscribe}}function L(e){let t,s,n,a,i;return{c(){t=D("div"),this.h()},l(r){t=I(r,"DIV",{class:!0,style:!0}),M(t).forEach(S),this.h()},h(){y(t,"class",s=e[0]+" pixi-canvas svelte-1k5qfmg"),y(t,"style",n=e[1]?"filter: grayscale();":void 0)},m(r,c){O(r,t,c),a||(i=W(t,"click",e[6]),a=!0)},p(r,[c]){c&1&&s!==(s=r[0]+" pixi-canvas svelte-1k5qfmg")&&y(t,"class",s),c&2&&n!==(n=r[1]?"filter: grayscale();":void 0)&&y(t,"style",n)},i:b,o:b,d(r){r&&S(t),a=!1,i()}}}function Q(e,t,s){let n,{imageSrc:a}=t,{displacePower:i=20}=t,{canvasId:r}=t,{isGrayscale:c=!1}=t;const l=new F({resizeTo:document.body}),d=N.from("https://raw.githubusercontent.com/j-fan/marle-images/main/jane/img/displacement_map.jpeg");d.texture.baseTexture.wrapMode=A.REPEAT;const u=new z.DisplacementFilter(d),f=K(0,{duration:600,easing:B});q(e,f,o=>s(5,n=o)),G(()=>{document.querySelector(`.${r}`).appendChild(l.view),l.stage.interactive=!0;const m=new H;l.stage.addChild(m);const p=J.from(a,{height:window.innerHeight,width:window.innerWidth,wrapMode:A.REPEAT});return m.addChild(p),l.stage.addChild(d),p.filters=[u],u.padding=10,u.scale.x=i,u.scale.y=i,l.ticker.add(()=>{d.x++,d.x>d.width&&(d.x=0)}),()=>{l.destroy(!0)}});function h(o){R.call(this,e,o)}return e.$$set=o=>{"imageSrc"in o&&s(3,a=o.imageSrc),"displacePower"in o&&s(4,i=o.displacePower),"canvasId"in o&&s(0,r=o.canvasId),"isGrayscale"in o&&s(1,c=o.isGrayscale)},e.$$.update=()=>{e.$$.dirty&16&&f.set(i),e.$$.dirty&32&&(u.scale.x=n,u.scale.y=n)},[r,c,f,a,i,n,h]}class $ extends j{constructor(t){super(),v(this,t,Q,L,k,{imageSrc:3,displacePower:4,canvasId:0,isGrayscale:1})}}export{$ as default};
