import{S as L,i as M,s as R,k,q as E,a as U,l as w,m as T,r as A,h as g,c as $,n as f,K as G,p as B,b as C,I as h,L as z,u as H,A as D,M as Q,J as q,N as W,O as X,v as Y,w as Z,x,f as ee,t as te,y as ne}from"../../../chunks/index-a2ffde42.js";import{d as se,w as re}from"../../../chunks/index-2fbf4577.js";import{t as ae}from"../../../chunks/index-3126fcd0.js";import{c as ie}from"../../../chunks/index-104a2518.js";let O=re(0);const j=[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,7]],le=t=>{for(const e of j){const[r,n]=e;if(r<=t&&t<n)return e}};let oe=se(O,t=>le(t));const ue=t=>{t>=0&&t<j.length&&O.update(()=>j[t][0])};function F(t,e,r){const n=t.slice();return n[8]=e[r],n[10]=r,n}function J(t){let e,r,n,d;function p(){return t[5](t[10])}return{c(){e=k("button"),r=E(t[10]),this.h()},l(l){e=w(l,"BUTTON",{id:!0});var u=T(e);r=A(u,t[10]),u.forEach(g),this.h()},h(){f(e,"id","segment-"+t[10])},m(l,u){C(l,e,u),h(e,r),n||(d=z(e,"click",p),n=!0)},p(l,u){t=l},d(l){l&&g(e),n=!1,d()}}}function ce(t){let e,r,n,d,p,l,u,a,v,_,c,S=!1,I,N,K,b=j,o=[];for(let s=0;s<b.length;s+=1)o[s]=J(F(t,b,s));function P(){cancelAnimationFrame(I),a.paused||(I=W(P),S=!0),t[7].call(a)}return{c(){e=k("div"),r=k("p"),n=E("Current timestamp: "),d=E(t[1]),p=E("s"),l=U();for(let s=0;s<o.length;s+=1)o[s].c();u=U(),a=k("video"),v=k("track"),_=k("source"),this.h()},l(s){e=w(s,"DIV",{class:!0});var m=T(e);r=w(m,"P",{});var i=T(r);n=A(i,"Current timestamp: "),d=A(i,t[1]),p=A(i,"s"),i.forEach(g),l=$(m);for(let V=0;V<o.length;V+=1)o[V].l(m);m.forEach(g),u=$(s),a=w(s,"VIDEO",{id:!0,defaultmuted:!0,disablepictureinpicture:!0,preload:!0,width:!0,style:!0,class:!0});var y=T(a);v=w(y,"TRACK",{kind:!0}),_=w(y,"SOURCE",{src:!0,type:!0}),y.forEach(g),this.h()},h(){f(e,"class","debug-controls svelte-wj4jki"),f(v,"kind","captions"),G(_.src,c=de)||f(_,"src",c),f(_,"type","video/mp4"),f(a,"id","vid"),a.loop=!0,a.muted=!0,a.playsInline=!0,f(a,"defaultmuted",""),f(a,"disablepictureinpicture",""),f(a,"preload","auto"),f(a,"width","1280"),B(a,"--grey-amount",t[2]),f(a,"class","svelte-wj4jki")},m(s,m){C(s,e,m),h(e,r),h(r,n),h(r,d),h(r,p),h(e,l);for(let i=0;i<o.length;i+=1)o[i].m(e,null);C(s,u,m),C(s,a,m),h(a,v),h(a,_),t[6](a),N||(K=z(a,"timeupdate",P),N=!0)},p(s,[m]){if(m&2&&H(d,s[1]),m&9){b=j;let i;for(i=0;i<b.length;i+=1){const y=F(s,b,i);o[i]?o[i].p(y,m):(o[i]=J(y),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=b.length}m&4&&B(a,"--grey-amount",s[2]),!S&&m&2&&!isNaN(s[1])&&(a.currentTime=s[1]),S=!1},i:D,o:D,d(s){s&&g(e),Q(o,s),s&&g(u),s&&g(a),t[6](null),N=!1,K()}}}const de="https://github.com/j-fan/marle-images/raw/main/jane/marle-escape.mp4",me=.05;function fe(t,e,r){let n,d,p;q(t,O,c=>r(1,n=c)),q(t,oe,c=>r(4,d=c));let l,u=ae(1,{delay:1e3,duration:3e3,easing:ie});q(t,u,c=>r(2,p=c));const a=c=>{ue(c),l.play(),c>4?u.set(0):u.set(1)};function v(c){X[c?"unshift":"push"](()=>{l=c,r(0,l)})}function _(){n=this.currentTime,O.set(n)}return t.$$.update=()=>{if(t.$$.dirty&19&&d){const[c,S]=d;n>=S-me&&(l==null||l.pause())}},[l,n,p,u,d,a,v,_]}class pe extends L{constructor(e){super(),M(this,e,fe,ce,R,{})}}function _e(t){let e,r;return e=new pe({}),{c(){Y(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,d){x(e,n,d),r=!0},p:D,i(n){r||(ee(e.$$.fragment,n),r=!0)},o(n){te(e.$$.fragment,n),r=!1},d(n){ne(e,n)}}}class ye extends L{constructor(e){super(),M(this,e,null,_e,R,{})}}export{ye as default};
