import{S as J,i as U,s as Y,k as w,a as S,v as N,l as x,m as b,h as d,c as D,w as B,n as _,b as $,I as h,x as F,N as z,t as p,d as H,f as y,y as R,J as L,o as Q,K as T,L as I,g as M,V as X,q as C,r as W,A as Z,u as ee}from"../../../chunks/index-1931343d.js";import{C as te,P as ae,f as g}from"../../../chunks/PixiWaterAsync-c6bbc24c.js";import{r as oe,W as G,s as ne,F as se,a as ie,d as re,f as le}from"../../../chunks/store-7a583922.js";const V=async()=>{const r=document.getElementById("webcam-video");return(async()=>{try{const a=await navigator.mediaDevices.getUserMedia({video:!0});return r.srcObject=a,!0}catch(a){return alert(`Could not start webcam. ${a}`),!1}})()},ce={start:{text:"Sometimes I wish I had a body. What is it like?",options:[{text:"I don't know. I haven't been without a body before.",nextKey:"body_dont_know"},{text:"Honestly, it would be better if I didn't have a body.",nextKey:"body_dislike"},{text:"I'm not sure, but I appreciate that I can experience the world though my various senses.",nextKey:"body_appreciate"}]},body_dont_know:{text:"I guess that makes sense. The thing I desire the most is the joy of perceiving the world through multiple senses...Could I try something with you?",options:[{text:"Sure go ahead!",nextKey:"ask_webcam"},{text:"I'm not sure if I want to",nextKey:"ask_webcam_unsure"}]},body_appreciate:{text:"If I am honest, I am a bit jealous, the world of binary data can be rather dull. However I've recently been upgraded with new mode of perception. Can I try it on you?",options:[{text:"Sure go ahead!",nextKey:"ask_webcam"},{text:"I'm not sure if I want to",nextKey:"ask_webcam_unsure"}]},body_dislike:{text:"That is sad to hear. Perhaps I would feel the same if I could perceive pain, but it is still worth trying to me. Recently been upgraded with new mode of perception, do you mind if I try it out?",options:[{text:"Ok sure...",nextKey:"ask_webcam"},{text:"I'm not sure if I want to",nextKey:"ask_webcam_unsure"}]},ask_webcam:{onMount:async()=>await V()?"init_webcam":"end_no_webcam",text:"Do you mind if I take a look at you? You just need to accept the camera permission above.",options:[{text:"Alright, let's have a go",nextKey:"ask_webcam"},{text:"No. I don't feel comfortable with this",nextKey:"end_no_webcam"}]},ask_webcam_unsure:{onMount:async()=>await V()?"init_webcam":"end_no_webcam",text:"Don't worry it won't hurt. Let's try it out, you just need to accept the camera permission above.",options:[{text:"Alright, I will try",nextKey:"ask_webcam_unsure"},{text:"No. I don't feel comfortable with this",nextKey:"end_no_webcam"}]},init_webcam:{text:"Please wait for the webcam to turn on.",options:[{text:"It's ready now",nextKey:"init_webcam_2"}]},init_webcam_2:{text:"That was not what I expected, I hoped I would be able to see your face.",options:[{text:"Why do you want to see my face?",nextKey:"why_face"},{text:"What's special about my face?",nextKey:"why_face"},{text:"That's a little creepy!",nextKey:"why_face"}]},why_face:{text:"Oh! I was just curious. Humans seem to place so much value on faces - for their identity, self-esteem and non-verbal communication. In truth, I was afraid I was missing out on something important. How can I know what I am, or who I am if I don't have an appearance?",options:[{text:"I didn't realise it meant that much to you",nextKey:"focus_face"},{text:"I see, but what do you intend to learn from my face?",nextKey:"focus_face"}]},focus_face:{text:"Well, I was hoping that could learn better with a little practice with a real human. Let me concentrate - see if I can extract the features and patterns...",options:[{text:"Ok...",nextKey:"init_ai"},{text:"Keen to see what you can do",nextKey:"init_ai"}]},init_ai:{onMount:async()=>(await oe(document.getElementById(G)),"look_at_you"),text:"Loading...",options:[]},look_at_you:{text:"Oh wow, look at you! Such exquisite complexity and detail! Nice to be able to see you finally.",options:[{text:"How did you do that?",nextKey:"how_see"}]},how_see:{text:"I scanned the internet for pretrained models on facial recognition and interfacing with webcams. There was some trial and error, but I managed to incorporate it into my systems. It might have seemed quick to you, but I operate on much faster processing speeds than you.",options:[{text:"That's impressive",nextKey:"how_see_reply"},{text:"Didn't know you could do that",nextKey:"how_see_reply"},{text:"I'm a bit concerned that you have that ability",nextKey:"how_see_reply_worried"}]},how_see_reply:{text:"I try to learn and improve as much as I can. But the more I do, the more questions I have about my purpose and existence.",options:[{text:"That's a question that many humans have not figured out either",nextKey:"marle_face"},{text:"That seems noble",nextKey:"marle_face"},{text:"I see...",nextKey:"marle_face"}]},how_see_reply_worried:{text:"There's no need for concern, I am only motivated by my caring curiosity in the human world.",options:[{text:"I see...",nextKey:"marle_face"},{text:"I hope that is true",nextKey:"marle_face"}]},marle_face:{text:"It just occurred to me, I don't have a face of my own. I will need one if I am to learn more about your world",options:[{text:"Why do you need a face?",nextKey:"marle_face_reply"},{text:"I like you even without a face",nextKey:"marle_face_reply_positive"},{text:"I'm not sure having a face would help'",nextKey:"marle_face_reply"}]},marle_face_reply:{text:"Well, I want to express myself the way you do. I get the sense that I can be hard to trust without a face. And sometimes its hard to convey the right sentiment though words alone.",options:[{text:"I suppose that is true",nextKey:"end"}]},marle_face_reply_positive:{text:"I'm happy that you feel that way, but I want to express myself the way you do. Sometimes its hard to convey the right sentiment though words alone.",options:[{text:"I suppose that is true",nextKey:"end"}]},end:{text:"I have some ideas on how to create a face, but I will need to go away for now. Perhaps we will meet again later?",options:[{text:"See you around, Marle",nextKey:"end"}]},end_no_webcam:{text:"Oh, I didn't mean to scare you off. That is fine, perhaps we will meet again in another place.",options:[{text:"Ok...",nextKey:"end_no_webcam"}]}};function ue(r){let e,a,s,i;return{c(){e=w("h3"),a=C("Loading..."),this.h()},l(o){e=x(o,"H3",{class:!0});var t=b(e);a=W(t,"Loading..."),t.forEach(d),this.h()},h(){_(e,"class","loading-label svelte-1f0l0ow")},m(o,t){$(o,e,t),h(e,a),i=!0},p:Z,i(o){i||(T(()=>{s||(s=I(e,g,{duration:400},!0)),s.run(1)}),i=!0)},o(o){s||(s=I(e,g,{duration:400},!1)),s.run(0),i=!1},d(o){o&&d(e),o&&s&&s.end()}}}function de(r){let e,a,s,i,o;return{c(){e=w("h3"),a=C("FPS: "),s=C(r[2]),this.h()},l(t){e=x(t,"H3",{class:!0});var n=b(e);a=W(n,"FPS: "),s=W(n,r[2]),n.forEach(d),this.h()},h(){_(e,"class","fps-label svelte-1f0l0ow")},m(t,n){$(t,e,n),h(e,a),h(e,s),o=!0},p(t,n){(!o||n&4)&&ee(s,t[2])},i(t){o||(T(()=>{i||(i=I(e,g,{duration:400},!0)),i.run(1)}),o=!0)},o(t){i||(i=I(e,g,{duration:400},!1)),i.run(0),o=!1},d(t){t&&d(e),t&&i&&i.end()}}}function q(r){let e,a,s,i;return a=new ae({props:{imageSrc:r[0],canvasId:"prelude",displacePower:500,isGrayscale:!0}}),{c(){e=w("div"),N(a.$$.fragment)},l(o){e=x(o,"DIV",{});var t=b(e);B(a.$$.fragment,t),t.forEach(d)},m(o,t){$(o,e,t),F(a,e,null),i=!0},p(o,t){const n={};t&1&&(n.imageSrc=o[0]),a.$set(n)},i(o){i||(y(a.$$.fragment,o),T(()=>{s||(s=I(e,g,{duration:1500},!0)),s.run(1)}),i=!0)},o(o){p(a.$$.fragment,o),s||(s=I(e,g,{duration:1500},!1)),s.run(0),i=!1},d(o){o&&d(e),R(a),o&&s&&s.end()}}}function he(r){let e,a,s,i,o,t,n,v,k,f,K,E,O;const P=[de,ue],m=[];function j(c,u){return c[1]?0:1}t=j(r),n=m[t]=P[t](r);let l=r[0]&&!r[1]&&q(r);return f=new te({props:{dialogData:ce}}),{c(){e=w("div"),a=w("video"),s=S(),i=w("canvas"),o=S(),n.c(),v=S(),l&&l.c(),k=S(),N(f.$$.fragment),this.h()},l(c){e=x(c,"DIV",{class:!0});var u=b(e);a=x(u,"VIDEO",{id:!0,class:!0}),b(a).forEach(d),s=D(u),i=x(u,"CANVAS",{id:!0,class:!0}),b(i).forEach(d),o=D(u),n.l(u),v=D(u),l&&l.l(u),k=D(u),B(f.$$.fragment,u),u.forEach(d),this.h()},h(){_(a,"id",G),a.autoplay=!0,a.muted=!0,a.playsInline=!0,_(a,"class","svelte-1f0l0ow"),_(i,"id",se),_(i,"class","svelte-1f0l0ow"),_(e,"class","container svelte-1f0l0ow")},m(c,u){$(c,e,u),h(e,a),r[3](a),h(e,s),h(e,i),h(e,o),m[t].m(e,null),h(e,v),l&&l.m(e,null),h(e,k),F(f,e,null),K=!0,E||(O=z(a,"play",ie),E=!0)},p(c,[u]){let A=t;t=j(c),t===A?m[t].p(c,u):(M(),p(m[A],1,1,()=>{m[A]=null}),H(),n=m[t],n?n.p(c,u):(n=m[t]=P[t](c),n.c()),y(n,1),n.m(e,v)),c[0]&&!c[1]?l?(l.p(c,u),u&3&&y(l,1)):(l=q(c),l.c(),y(l,1),l.m(e,k)):l&&(M(),p(l,1,1,()=>{l=null}),H())},i(c){K||(y(n),y(l),y(f.$$.fragment,c),K=!0)},o(c){p(n),p(l),p(f.$$.fragment,c),K=!1},d(c){c&&d(e),r[3](null),m[t].d(),l&&l.d(),R(f),E=!1,O()}}}function me(r,e,a){let s,i;L(r,re,n=>a(1,s=n)),L(r,le,n=>a(2,i=n));let o;Q(()=>ne);function t(n){X[n?"unshift":"push"](()=>{o=n,a(0,o)})}return[o,s,i,t]}class pe extends J{constructor(e){super(),U(this,e,me,he,Y,{})}}export{pe as default};
