import{P as de,S as Q,i as $,s as N,e as O,b as P,g as B,t as k,d as G,f as d,h,Q as ae,E as ie,k as w,l as I,m as E,n as v,p as M,O as R,F as re,G as oe,H as ce,I as y,o as me,K as z,R as ue,C as pe,A as g,L as X,q as T,a as A,r as W,c as H,u as fe,T as ke,D as be,v as q,w as _e,x as K,y as L,U as ge,V as ve}from"./index-b357ccce.js";import{_ as ye}from"./preload-helper-b21cceae.js";function we(s){const e=.36363636363636365,n=8/11,t=9/10,a=4356/361,i=35442/1805,l=16061/1805,r=s*s;return s<e?7.5625*r:s<n?9.075*r-9.9*s+3.4:s<t?a*r-i*s+l:10.8*s*s-20.52*s+10.72}function Ie(s){const e=s-1;return e*e*e+1}function Ae(s){return-.5*(Math.cos(Math.PI*s)-1)}function Ee(s,{delay:e=0,duration:n=400,easing:t=de}={}){const a=+getComputedStyle(s).opacity;return{delay:e,duration:n,easing:t,css:i=>`opacity: ${i*a}`}}function Y(s,{delay:e=0,duration:n=400,easing:t=Ie,x:a=0,y:i=0,opacity:l=0}={}){const r=getComputedStyle(s),o=+r.opacity,c=r.transform==="none"?"":r.transform,m=o*(1-l);return{delay:e,duration:n,easing:t,css:(S,C)=>`
			transform: ${c} translate(${(1-S)*a}px, ${(1-S)*i}px);
			opacity: ${o-m*C}`}}function Pe(s){let e,n,t,a;const i=s[4].default,l=ie(i,s,s[3],null);return{c(){e=w("button"),l&&l.c(),this.h()},l(r){e=I(r,"BUTTON",{type:!0,style:!0,class:!0});var o=E(e);l&&l.l(o),o.forEach(h),this.h()},h(){v(e,"type","button"),M(e,"width",s[1]),v(e,"class","svelte-1rsnc9j")},m(r,o){P(r,e,o),l&&l.m(e,null),n=!0,t||(a=R(e,"click",s[5]),t=!0)},p(r,o){l&&l.p&&(!n||o&8)&&re(l,i,r,r[3],n?ce(i,r[3],o,null):oe(r[3]),null)},i(r){n||(d(l,r),n=!0)},o(r){k(l,r),n=!1},d(r){r&&h(e),l&&l.d(r),t=!1,a()}}}function Se(s){let e,n,t;const a=s[4].default,i=ie(a,s,s[3],null);return{c(){e=w("a"),n=w("button"),i&&i.c(),this.h()},l(l){e=I(l,"A",{href:!0,style:!0,class:!0});var r=E(e);n=I(r,"BUTTON",{type:!0,style:!0,class:!0});var o=E(n);i&&i.l(o),o.forEach(h),r.forEach(h),this.h()},h(){v(n,"type","button"),M(n,"width",s[1]),v(n,"class","svelte-1rsnc9j"),v(e,"href",s[0]),M(e,"width",s[1]),v(e,"class","svelte-1rsnc9j")},m(l,r){P(l,e,r),y(e,n),i&&i.m(n,null),t=!0},p(l,r){i&&i.p&&(!t||r&8)&&re(i,a,l,l[3],t?ce(a,l[3],r,null):oe(l[3]),null),(!t||r&1)&&v(e,"href",l[0])},i(l){t||(d(i,l),t=!0)},o(l){k(i,l),t=!1},d(l){l&&h(e),i&&i.d(l)}}}function Ce(s){let e,n,t,a;const i=[Se,Pe],l=[];function r(o,c){return o[0]?0:1}return e=r(s),n=l[e]=i[e](s),{c(){n.c(),t=O()},l(o){n.l(o),t=O()},m(o,c){l[e].m(o,c),P(o,t,c),a=!0},p(o,[c]){let m=e;e=r(o),e===m?l[e].p(o,c):(B(),k(l[m],1,1,()=>{l[m]=null}),G(),n=l[e],n?n.p(o,c):(n=l[e]=i[e](o),n.c()),d(n,1),n.m(t.parentNode,t))},i(o){a||(d(n),a=!0)},o(o){k(n),a=!1},d(o){l[e].d(o),o&&h(t)}}}function De(s,e,n){let{$$slots:t={},$$scope:a}=e,{isFullWidth:i=!1}=e,{href:l=void 0}=e;const r=i?"100%":"auto";function o(c){ae.call(this,s,c)}return s.$$set=c=>{"isFullWidth"in c&&n(2,i=c.isFullWidth),"href"in c&&n(0,l=c.href),"$$scope"in c&&n(3,a=c.$$scope)},[l,r,i,a,t,o]}class Oe extends Q{constructor(e){super(),$(this,e,De,Ce,N,{isFullWidth:2,href:0})}}const Z=(s,e)=>{const n=s[e];return n===void 0?(console.error(`Dialog key ${String(e)} is unknown in dialogData`),{text:`Something went wrong with the dialog logic: "${String(e)}" key is unknown`,options:[]}):n};function x(s,e,n){const t=s.slice();return t[6]=e[n],t}function ee(s){let e,n,t,a,i,l=s[1]&&te(s);return{c(){e=w("div"),l&&l.c(),this.h()},l(r){e=I(r,"DIV",{class:!0,style:!0});var o=E(e);l&&l.l(o),o.forEach(h),this.h()},h(){v(e,"class","marle-icon svelte-1k1r9r8"),M(e,"background-image","url('https://raw.githubusercontent.com/j-fan/marle-images/main/jane/img/marle_green.jpg')")},m(r,o){P(r,e,o),l&&l.m(e,null),t=!0,a||(i=[R(e,"click",s[3]),R(e,"introend",s[3])],a=!0)},p(r,o){s=r,s[1]?l?(l.p(s,o),o&2&&d(l,1)):(l=te(s),l.c(),d(l,1),l.m(e,null)):l&&(B(),k(l,1,1,()=>{l=null}),G())},i(r){t||(d(l),n||z(()=>{n=ue(e,Y,{y:40,duration:1e3,easing:we}),n.start()}),t=!0)},o(r){k(l),t=!1},d(r){r&&h(e),l&&l.d(),a=!1,pe(i)}}}function te(s){let e,n=s[2],t,a,i=se(s);return{c(){e=w("div"),i.c(),this.h()},l(l){e=I(l,"DIV",{class:!0});var r=E(e);i.l(r),r.forEach(h),this.h()},h(){v(e,"class","chat-wrapper svelte-1k1r9r8")},m(l,r){P(l,e,r),i.m(e,null),a=!0},p(l,r){r&4&&N(n,n=l[2])?(B(),k(i,1,1,g),G(),i=se(l),i.c(),d(i,1),i.m(e,null)):i.p(l,r)},i(l){a||(d(i),z(()=>{t||(t=X(e,Y,{y:20,duration:300,delay:500},!0)),t.run(1)}),a=!0)},o(l){k(i),t||(t=X(e,Y,{y:20,duration:300,delay:500},!1)),t.run(0),a=!1},d(l){l&&h(e),i.d(l),l&&t&&t.end()}}}function le(s){let e,n;return{c(){e=w("h4"),n=T("YOU"),this.h()},l(t){e=I(t,"H4",{class:!0});var a=E(e);n=W(a,"YOU"),a.forEach(h),this.h()},h(){v(e,"class","svelte-1k1r9r8")},m(t,a){P(t,e,a),y(e,n)},d(t){t&&h(e)}}}function Ve(s){let e=s[6].text+"",n;return{c(){n=T(e)},l(t){n=W(t,e)},m(t,a){P(t,n,a)},p(t,a){a&4&&e!==(e=t[6].text+"")&&fe(n,e)},d(t){t&&h(n)}}}function ne(s){let e,n;return e=new Oe({props:{isFullWidth:!0,$$slots:{default:[Ve]},$$scope:{ctx:s}}}),e.$on("click",function(){be(s[4](s[6]))&&s[4](s[6]).apply(this,arguments)}),{c(){q(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,a){K(e,t,a),n=!0},p(t,a){s=t;const i={};a&516&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function se(s){let e,n,t,a,i,l,r=s[2].text+"",o,c,m,S,C,D,b=s[2].options.length>0&&le(),V=s[2].options,_=[];for(let u=0;u<V.length;u+=1)_[u]=ne(x(s,V,u));const he=u=>k(_[u],1,1,()=>{_[u]=null});return{c(){e=w("div"),n=w("div"),t=w("h4"),a=T("Marle"),i=A(),l=w("p"),o=T(r),c=A(),m=w("div"),b&&b.c(),S=A();for(let u=0;u<_.length;u+=1)_[u].c();this.h()},l(u){e=I(u,"DIV",{class:!0});var p=E(e);n=I(p,"DIV",{class:!0});var f=E(n);t=I(f,"H4",{class:!0});var j=E(t);a=W(j,"Marle"),j.forEach(h),i=H(f),l=I(f,"P",{});var J=E(l);o=W(J,r),J.forEach(h),f.forEach(h),c=H(p),m=I(p,"DIV",{class:!0});var F=E(m);b&&b.l(F),S=H(F);for(let U=0;U<_.length;U+=1)_[U].l(F);F.forEach(h),p.forEach(h),this.h()},h(){v(t,"class","svelte-1k1r9r8"),v(n,"class","dialog-item left svelte-1k1r9r8"),v(m,"class","dialog-item right svelte-1k1r9r8"),v(e,"class","chat-content svelte-1k1r9r8")},m(u,p){P(u,e,p),y(e,n),y(n,t),y(t,a),y(n,i),y(n,l),y(l,o),y(e,c),y(e,m),b&&b.m(m,null),y(m,S);for(let f=0;f<_.length;f+=1)_[f].m(m,null);D=!0},p(u,p){if((!D||p&4)&&r!==(r=u[2].text+"")&&fe(o,r),u[2].options.length>0?b||(b=le(),b.c(),b.m(m,S)):b&&(b.d(1),b=null),p&20){V=u[2].options;let f;for(f=0;f<V.length;f+=1){const j=x(u,V,f);_[f]?(_[f].p(j,p),d(_[f],1)):(_[f]=ne(j),_[f].c(),d(_[f],1),_[f].m(m,null))}for(B(),f=V.length;f<_.length;f+=1)he(f);G()}},i(u){if(!D){for(let p=0;p<V.length;p+=1)d(_[p]);C||z(()=>{C=ue(e,Ee,{duration:400}),C.start()}),D=!0}},o(u){_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)k(_[p]);D=!1},d(u){u&&h(e),b&&b.d(),ke(_,u)}}}function Be(s){let e,n,t=s[0]&&ee(s);return{c(){t&&t.c(),e=O()},l(a){t&&t.l(a),e=O()},m(a,i){t&&t.m(a,i),P(a,e,i),n=!0},p(a,[i]){a[0]?t?(t.p(a,i),i&1&&d(t,1)):(t=ee(a),t.c(),d(t,1),t.m(e.parentNode,e)):t&&(B(),k(t,1,1,()=>{t=null}),G())},i(a){n||(d(t),n=!0)},o(a){k(t),n=!1},d(a){t&&t.d(a),a&&h(e)}}}function Ge(s,e,n){let{dialogData:t}=e,a=!1,i=!1,l=t.start;me(()=>{n(0,a=!0)});const r=()=>{n(1,i=!i)},o=c=>async m=>{var C,D;m.stopPropagation(),n(2,l=Z(t,c.nextKey));const S=await((C=l.onMount)==null?void 0:C.call(l));S&&n(2,l=Z(t,S)),(D=c.onClick)==null||D.call(c)};return s.$$set=c=>{"dialogData"in c&&n(5,t=c.dialogData)},[a,i,l,r,o,t]}class He extends Q{constructor(e){super(),$(this,e,Ge,Be,N,{dialogData:5})}}function je(s){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Fe(s){let e,n,t;var a=s[5].default;function i(l){return{props:{imageSrc:l[0],displacePower:l[1],canvasId:l[2],isGrayscale:l[3]}}}return a&&(e=new a(i(s)),e.$on("click",s[4])),{c(){e&&q(e.$$.fragment),n=O()},l(l){e&&_e(e.$$.fragment,l),n=O()},m(l,r){e&&K(e,l,r),P(l,n,r),t=!0},p(l,r){const o={};if(r&1&&(o.imageSrc=l[0]),r&2&&(o.displacePower=l[1]),r&4&&(o.canvasId=l[2]),r&8&&(o.isGrayscale=l[3]),a!==(a=l[5].default)){if(e){B();const c=e;k(c.$$.fragment,1,0,()=>{L(c,1)}),G()}a?(e=new a(i(l)),e.$on("click",l[4]),q(e.$$.fragment),d(e.$$.fragment,1),K(e,n.parentNode,n)):e=null}else a&&e.$set(o)},i(l){t||(e&&d(e.$$.fragment,l),t=!0)},o(l){e&&k(e.$$.fragment,l),t=!1},d(l){l&&h(n),e&&L(e,l)}}}function Me(s){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Te(s){let e,n,t={ctx:s,current:null,token:null,hasCatch:!1,pending:Me,then:Fe,catch:je,value:5,blocks:[,,,]};return ge(ye(()=>import("./PixiWater-cbdd8420.js"),["./PixiWater-cbdd8420.js","./index-b357ccce.js","./pixi-7ebbcd1d.js","./index-05d5dca7.js","./store-8a0a2259.js","../assets/PixiWater-0f3a4b40.css"],import.meta.url),t),{c(){e=O(),t.block.c()},l(a){e=O(),t.block.l(a)},m(a,i){P(a,e,i),t.block.m(a,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(a,[i]){s=a,ve(t,s,i)},i(a){n||(d(t.block),n=!0)},o(a){for(let i=0;i<3;i+=1){const l=t.blocks[i];k(l)}n=!1},d(a){a&&h(e),t.block.d(a),t.token=null,t=null}}}function We(s,e,n){let{imageSrc:t}=e,{displacePower:a=20}=e,{canvasId:i}=e,{isGrayscale:l=!1}=e;function r(o){ae.call(this,s,o)}return s.$$set=o=>{"imageSrc"in o&&n(0,t=o.imageSrc),"displacePower"in o&&n(1,a=o.displacePower),"canvasId"in o&&n(2,i=o.canvasId),"isGrayscale"in o&&n(3,l=o.isGrayscale)},[t,a,i,l,r]}class Re extends Q{constructor(e){super(),$(this,e,We,Te,N,{imageSrc:0,displacePower:1,canvasId:2,isGrayscale:3})}}export{He as C,Re as P,Ee as f,Ae as s};
