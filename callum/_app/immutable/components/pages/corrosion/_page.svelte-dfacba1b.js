import{H as st,S as ot,i as lt,s as ct,a as W,k as S,q as j,I as ut,h as M,c as D,l as R,m as H,r as U,n as h,J as ft,b as q,F as x,K as Z,L as B,u as dt,A as $,M as mt,o as ht,N as pt,O as gt,P as _t}from"../../../chunks/index-ba8e8c5b.js";import{i as vt,b as yt,a as X,r as bt}from"../../../chunks/isObject-fe408183.js";const Mt=(t,r)=>{const n=setInterval(t,r);st(()=>{clearInterval(n)})};var xt="[object Symbol]";function It(t){return typeof t=="symbol"||vt(t)&&yt(t)==xt}var wt=/\s/;function kt(t){for(var r=t.length;r--&&wt.test(t.charAt(r)););return r}var Et=/^\s+/;function Tt(t){return t&&t.slice(0,kt(t)+1).replace(Et,"")}var tt=0/0,Ct=/^[-+]0x[0-9a-f]+$/i,St=/^0b[01]+$/i,Rt=/^0o[0-7]+$/i,Ot=parseInt;function et(t){if(typeof t=="number")return t;if(It(t))return tt;if(X(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=X(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=Tt(t);var n=St.test(t);return n||Rt.test(t)?Ot(t.slice(2),n?2:8):Ct.test(t)?tt:+t}var At=function(){return bt.Date.now()};const K=At;var Lt="Expected a function",Nt=Math.max,Pt=Math.min;function Wt(t,r,n){var c,l,g,f,a,s,I=0,_=!1,v=!1,y=!0;if(typeof t!="function")throw new TypeError(Lt);r=et(r)||0,X(n)&&(_=!!n.leading,v="maxWait"in n,g=v?Nt(et(n.maxWait)||0,r):g,y="trailing"in n?!!n.trailing:y);function T(e){var o=c,u=l;return c=l=void 0,I=e,f=t.apply(u,o),f}function O(e){return I=e,a=setTimeout(k,r),_?T(e):f}function w(e){var o=e-s,u=e-I,m=r-o;return v?Pt(m,g-u):m}function C(e){var o=e-s,u=e-I;return s===void 0||o>=r||o<0||v&&u>=g}function k(){var e=K();if(C(e))return b(e);a=setTimeout(k,w(e))}function b(e){return a=void 0,y&&c?T(e):(c=l=void 0,f)}function i(){a!==void 0&&clearTimeout(a),I=0,c=s=l=a=void 0}function p(){return a===void 0?f:b(K())}function d(){var e=K(),o=C(e);if(c=arguments,l=this,s=e,o){if(a===void 0)return O(s);if(v)return clearTimeout(a),a=setTimeout(k,r),T(s)}return a===void 0&&(a=setTimeout(k,r)),f}return d.cancel=i,d.flush=p,d}var Dt="Expected a function";function Ht(t,r,n){var c=!0,l=!0;if(typeof t!="function")throw new TypeError(Dt);return X(n)&&(c="leading"in n?!!n.leading:c,l="trailing"in n?!!n.trailing:l),Wt(t,r,{leading:c,maxWait:r,trailing:l})}const{window:Y}=pt;function qt(t){let r,n,c,l,g,f,a,s,I,_,v,y,T,O,w,C,k,b,i,p,d;return{c(){r=W(),n=S("canvas"),c=W(),l=S("div"),g=W(),f=S("div"),a=S("div"),s=S("input"),I=W(),_=S("label"),v=j("Mask "),y=j(t[1]),T=j("%"),O=W(),w=S("h2"),C=j("I can feel my mind expanding..."),k=W(),b=S("img"),this.h()},l(e){ut('[data-svelte="svelte-127o3r5"]',document.head).forEach(M),r=D(e),n=R(e,"CANVAS",{id:!0,class:!0}),H(n).forEach(M),c=D(e),l=R(e,"DIV",{class:!0}),H(l).forEach(M),g=D(e),f=R(e,"DIV",{class:!0});var u=H(f);a=R(u,"DIV",{id:!0,class:!0});var m=H(a);s=R(m,"INPUT",{id:!0,type:!0,name:!0,min:!0,max:!0}),I=D(m),_=R(m,"LABEL",{for:!0});var E=H(_);v=U(E,"Mask "),y=U(E,t[1]),T=U(E,"%"),E.forEach(M),m.forEach(M),O=D(u),w=R(u,"H2",{class:!0});var L=H(w);C=U(L,"I can feel my mind expanding..."),L.forEach(M),k=D(u),b=R(u,"IMG",{id:!0,class:!0,alt:!0,src:!0}),u.forEach(M),this.h()},h(){document.title="Corrosion - Callum Howard",h(n,"id","canvas"),h(n,"class","fixed"),h(l,"class","fixed top-0 left-0 w-full h-full vignette svelte-55c46d"),h(s,"id","mask"),h(s,"type","range"),h(s,"name","mask"),h(s,"min",0),h(s,"max",100),h(_,"for","mask"),h(a,"id","debug"),h(a,"class","hidden"),h(w,"class","fixed italic font-serif text-4xl font-black mx-32 my-32 select-none expand-text svelte-55c46d"),h(b,"id","silhouette"),h(b,"class","fixed bottom-0 m-auto left-0 right-0 opacity-70 hue-rotate-30 select-none"),h(b,"alt","silhouette"),ft(b.src,i="https://raw.githubusercontent.com/CallumHoward/marle-media/main/silhouette.png")||h(b,"src",i),h(f,"class","absolute w-screen h-full")},m(e,o){q(e,r,o),q(e,n,o),t[6](n),q(e,c,o),q(e,l,o),q(e,g,o),q(e,f,o),x(f,a),x(a,s),Z(s,t[1]),x(a,I),x(a,_),x(_,v),x(_,y),x(_,T),x(f,O),x(f,w),x(w,C),x(f,k),x(f,b),p||(d=[B(Y,"mousemove",t[2]),B(Y,"touchmove",t[2]),B(Y,"resize",t[5]),B(n,"click",t[4]),B(s,"change",t[7]),B(s,"input",t[7])],p=!0)},p(e,[o]){o&2&&Z(s,e[1]),o&2&&dt(y,e[1])},i:$,o:$,d(e){e&&M(r),e&&M(n),t[6](null),e&&M(c),e&&M(l),e&&M(g),e&&M(f),p=!1,mt(d)}}}const nt="^|&";function Bt(t,r,n){let c,l,g,f,a=80,s={x:0,y:0};const I=i=>{i instanceof MouseEvent?(s.x=i.clientX,s.y=i.clientY):(s.x=i.touches[0].clientX,s.y=i.touches[0].clientY),n(1,a-=.05)},_=()=>{if(!c){console.error("Canvas not initialized!");return}l=c.getContext("2d"),v()},v=()=>{g=n(0,c.width=window.innerWidth,c),f=n(0,c.height=window.innerHeight,c)},y=()=>{l.fillStyle="white",l.fillRect(0,0,g,f),l.fillStyle="black";const i=30,p=Math.ceil(g/i),d=Math.ceil(f/i),e=9,o=Math.pow(2,e*2),u=Math.round(Math.random()*o),m=Math.floor(Math.random()*nt.length),E=p*a/100/2,L=p-E,A=d*a/100/2,z=d-A,N=p*(100-a)/100/2,G=Math.ceil(s.x/i),Q=Math.ceil(s.y/i),V=5;for(let P=E;P<L;P++){const J=Math.round((Math.random()-.5)*V);for(let F=A+J;F<z-J;F++){const at=Math.round((Math.random()-.5)*V);if(!w(G,Q,N,P+at,F+J))continue;const rt=P*i,it=F*i;T(rt,it,i,u,m,e)}}},T=(i,p,d,e,o,u)=>{l.save(),l.translate(i+d/2,p+d/2);const m=d/u,E=e.toString(2),L=Math.floor(Math.random()*4)*Math.PI/2;l.rotate(L);for(let A=0;A<u;A++){const z=E[A];for(let N=0;N<u;N++){const G=E[N+u];if(O(z,G,o)){const V=-d/2+A*m,P=-d/2+N*m;l.fillRect(V,P,m,m)}}}l.restore()},O=(i,p,d)=>{const e=nt[d];return{"^":(u,m)=>u^m,"&":(u,m)=>u&m,"|":(u,m)=>u|m}[e](i,p)},w=(i,p,d,e,o)=>(i-e)*(i-e)+(p-o)*(p-o)<=d*d;ht(()=>{_(),y(),Mt(y,100)});const C=()=>{v(),Ht(y,100,{leading:!0})};function k(i){gt[i?"unshift":"push"](()=>{c=i,n(0,c)})}function b(){a=_t(this.value),n(1,a)}return[c,a,I,v,y,C,k,b]}class jt extends ot{constructor(r){super(),lt(this,r,Bt,qt,ct,{})}}export{jt as default};
